{"version":3,"sources":["webpack:///webpack/bootstrap ed548325648b3ff15432","webpack:///external \"babel-polyfill\"","webpack:///./src/server.js","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///./src/app/App.js","webpack:///external \"babel-core/register\"","webpack:///./src/utils/ViewUtils.js","webpack:///./config.js","webpack:///./src/app/components/endpoint-container/EndpointContainer.js","webpack:///./src/app/components/endpoint-details/EndpointDetailsComponent.js","webpack:///external \"markdown\"","webpack:///./src/app/Context.js","webpack:///./src/app/components/modal/JsonSchemaModalComponent.js","webpack:///external \"highlight.js\"","webpack:///./src/app/components/copy-to-clipboard/CopyToClipboardComponent.js","webpack:///./src/app/components/endpoint-details/copy-as-curl/CopyAsCurlComponent.js","webpack:///./src/app/components/endpoints-table-of-contents/EndpointsTableOfContentsComponent.js","webpack:///./src/app/components/error-message/ErrorMessageComponent.js","webpack:///./src/app/components/toolbar/ToolbarComponent.js","webpack:///external \"jquery\"","webpack:///./src/app/components/scroll-to-top/ScrollToTopComponent.js","webpack:///external \"assert\"","webpack:///./src/template.js","webpack:///external \"express\"","webpack:///external \"uuid\"","webpack:///external \"path\"","webpack:///external \"util\"","webpack:///external \"fs\"","webpack:///external \"fruster-bus\"","webpack:///external \"fruster-log\"","webpack:///./src/utils/utils.js","webpack:///./src/constants.js","webpack:///./src/utils/JsonSchemaCruncher.js","webpack:///external \"json-schema-ref-parser\"","webpack:///external \"fs-extra\"","webpack:///external \"json-schema-faker\"","webpack:///external \"request\"","webpack:///./src/utils/service-client-generator/ServiceClientGenerator.js","webpack:///external \"lodash\"","webpack:///external \"fruster-health\""],"names":["require","express","uuid","app","path","util","fs","bus","log","utils","ViewUtils","config","port","ServiceClientGenerator","_","schemasPerService","endpointsByType","http","service","ws","cachedHtml","connect","address","start","startServer","use","static","resolve","__dirname","post","req","res","resetCache","status","end","get","type","serviceName","params","endpoints","options","subjects","query","serviceClientGenerator","className","replaceAll","startCase","file","toJavascriptClass","setHeader","warn","inspect","send","metadataResponses","project","url","console","httpRequest","maxResponses","message","subject","requestMany","skipOptionsRequest","reqId","v4","schemasWithErrors","promises","allEndpoints","forEach","response","from","instanceId","fixedServiceName","replace","data","promise","derefJsonSchema","schemas","then","derefResp","errors","Object","keys","length","map","e","id","exposing","object","i","includes","parseEndpoint","push","Promise","all","sortAfterEndpointName","endpointType","state","appString","renderedHtml","body","title","projectName","initialState","JSON","stringify","headersSent","error","json","listen","splitIndex","splits","split","addUnique","cUrl","getCUrlFromEndpoint","endpoint","requestSchema","find","s","parsedSubject","parseSubjectToAPIUrl","sample","method","authHeader","permissions","mustBeLoggedIn","apiRoot","sort","a","b","aU","toUpperCase","bU","undefined","App","props","resetFilter","setState","isFilteredResult","numberOfEndpoints","backupEndpointsByType","filter","changeFilterType","filterBy","marginLeft","color","listEndpointDetails","some","key","sortedForEach","index","persist","target","value","filterBySubject","filterByPermissions","filterByDocs","squishObject","obj","output","squishedSubObject","subObjKey","foundEndpoints","that","flatEndpointObj","docs","comparisonString","valueArray","inputValue","toLowerCase","containsSearchWord","permission","hidden","window","scrollTo","String","join","Component","outputURL","module","exports","indexOfFirstSlash","indexOf","substring","search","replacement","array","objectExists","isObject","string","colorCodedWords","reverse","Array","sortLayer","layer","sortedObj","sortedObjkey","toLoop","handler","process","env","BUS","parseInt","PORT","API_ROOT","PROJECT_NAME","parseColorCodedWords","COLOR_CODED_WORDS","rules","indexOfColon","rule","words","word","EndpointContainer","checked","checkboxes","prepareCheckboxes","onCheckboxChecked","name","newCheckedStatus","checkboxesNewStatus","checkAll","encodeURIComponent","getCheckedEndpoints","getEndpoints","schema","responseSchema","returnObj","EndpointDetailsComponent","getParsedSubject","urlSubjectLink","getSubjectLink","urlSubject","getSubject","isOpen","selected","lastHash","getColorCodedTitle","addEventListener","reactToHashChange","setTimeout","decodedURI","decodeURI","location","hash","newHashWithoutTab","lastHashWithoutTab","reactToClickHash","$","modal","requestBodyModal","openModal","responseBodyModal","markup","scrollIntoView","ref","deprecated","toggleFolded","display","__html","getDeprecationNote","onCheck","float","getEndpointDetailsTable","context","getDocumentationTable","description","markdown","toHTML","_error","openRequestBodyModal","getPermissions","openResponseBodyModal","toString","getDocEntry","nativeEvent","which","preventDefault","permissionsHmtl","input","getDeprecatedHtml","parts","partsWithEndpoint","endpointsExists","partToCompare","partHasDot","splice","parsedHttpEndpoint","pt","ApiDocContext","createContext","configure","languages","getTabFromHash","decodedURIHash","windowLocationTab","Number","err","cssFriendlify","JsonSchemaModalComponent","colorized","currentTabIndex","schemaToJson","assign","jsonSample","sortObject","jsonSchema","isError","goToTab","cursor","closeModal","endpointUrl","renderSample","renderJsonSchema","marginTop","copyJsonSampleToClipboard","copyToClipboard","jsonSampleElem","copyJsonSchemaToClipboard","jsonSchemaElem","setInitialOpenState","history","replaceState","on","resetModalHash","docson","nodeDocson","doc","highlightBlock","CopyToClipboardComponent","copyData","select","document","execCommand","CopyAsCurlComponent","copyAsCurl","EndpointsTableOfContentsComponent","httpEndpoints","otherEndpoints","sortEndpoints","ErrorMessageComponent","preparedSchemasWithErrors","prepareSchemasWithErrors","refreshPage","getSchemasWithErrors","schemaName","schemaWithError","openSchemaWithError","reload","ToolbarComponent","allEndpointsOpen","renderFiltering","timeout","clearTimeout","confirm","ScrollToTopComponent","scrollToTop","scrollTop","documentElement","Date","toJSON","constants","filePath","JsonSchemaCruncher","jsf","request","option","requiredOnly","alwaysFakeOptionals","failOnInvalidTypes","useDefaultValue","format","Utils","prepareSchema","_setFakerSpecificAttrs","jsonSchemaCruncher","buildContext","schemaPromises","getSchema","_decirlularizeObject","catch","errorString","fixErrorOutput","stack","result","parse","_circular","resp","decircularize","depth","MAX_DEPTH_FOR_CIRCULAR_JSON_SCHEMAS","d","hasOwnProperty","debug","reject","headers","$RefParser","tempDir","schemasDir","schemaId","silly","schemaPath","dereference","circular","bundle","_writeJsonSchemas","ensureDir","writeJson","p","customTypeDefs","endpointConstants","toTitleCase","constant","_getEndpointConstant","endpointParameters","_getEndpointParameters","returnType","_getEndpointTypeDef","constantNameCombined","constantName","constantsWithSameName","c","Endpoint","functionVariableName","typDefs","classString","endpointConstant","_formatJavascript","typeDefs","param","ArrayParameter","TypeDefArrayProperty","Parameter","TypeDefProperty","items","typeDef","TypeDef","parameters","properties","propertyKeys","property","parameter","subParams","propertySchema","required","constantsServiceName","camelCase","_type","typeDefProperties","typeDefProperty","typeString","isArray","urlConstant","endpointName","deprecatedReason","sortParams","concat","functionParams","getParamsList","requestBodyParams","slice","deprecatedReasonString","isRequestBody","replaceReservedKeyword","aVal","bVal","RESERVED_JAVASCRIPT_KEYWORDS"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed548325648b3ff15432","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 1\n// module chunks = 0","require(\"babel-polyfill\");\r\n\r\nimport React from \"react\";\r\nimport { renderToString } from \"react-dom/server\";\r\nimport App from \"./app/App\";\r\nimport template from \"./template\";\r\n\r\nconst express = require(\"express\");\r\nconst uuid = require(\"uuid\");\r\nconst app = express();\r\nconst path = require(\"path\");\r\nconst util = require(\"util\");\r\nconst fs = require(\"fs\");\r\n\r\nconst bus = require(\"fruster-bus\");\r\nconst log = require(\"fruster-log\");\r\nconst utils = require(\"./utils/utils\");\r\nconst ViewUtils = require(\"./utils/ViewUtils\");\r\nconst config = require(\"../config\");\r\nconst port = config.port || 3100;\r\n\r\nconst ServiceClientGenerator = require(\"./utils/service-client-generator/ServiceClientGenerator\");\r\nconst _ = require(\"lodash\");\r\n\r\nlet schemasPerService = {};\r\nlet endpointsByType = { http: {}, service: {}, ws: {} };\r\nlet cachedHtml;\r\n\r\n(async function () {\r\n\r\n    await bus.connect({ address: config.bus });\r\n\r\n    require(\"fruster-health\").start();\r\n\r\n    await startServer();\r\n\r\n}());\r\n\r\nfunction startServer() {\r\n    app.use(\"/assets\", express.static(path.resolve(`${__dirname}/assets`)));\r\n\r\n    app.post(\"/reset-cache\", (req, res) => {\r\n        resetCache();\r\n\r\n        res.status(200);\r\n        res.end();\r\n    });\r\n\r\n    app.get(\"/service-client/:serviceName\", async (req, res) => {\r\n        try {\r\n            const type = \"service\";\r\n            const serviceName = req.params.serviceName;\r\n            const endpoints = endpointsByType.service[serviceName];\r\n\r\n            if (!endpointsByType.service[serviceName]) {\r\n                res.end(\"<html><body><h1>No data found</h1><h2>run the api doc at least once and try again</h2></body></html>\");\r\n                return;\r\n            }\r\n\r\n            const options = { serviceName, type, endpoints, subjects: req.query.subjects };\r\n\r\n            const serviceClientGenerator = new ServiceClientGenerator(options);\r\n            const className = ViewUtils.replaceAll(_.startCase(serviceName), \" \", \"\") + \"Client\";\r\n\r\n            const file = serviceClientGenerator.toJavascriptClass();\r\n\r\n            res.setHeader(\"Content-type\", \"application/javascript\");\r\n            res.setHeader(\"Content-disposition\", `attachment; filename=${className}.js`);\r\n\r\n            res.end(file);\r\n        } catch (err) {\r\n            log.warn(err);\r\n            res.end(`<html><body>Could not generate service client. <br/>Reason:  <br/><code><pre>${util.inspect(err, null, null)}</pre></code></body></html>`);\r\n        }\r\n    });\r\n\r\n    app.get(\"/\", async (req, res) => {\r\n        try {\r\n            res.setHeader(\"Cache-Control\", \"max-age=300\");\r\n\r\n            if (req.query.resetCache)\r\n                resetCache();\r\n\r\n            /** If there is cached html we send this right away but let the server process the rest, this will speed up avarage load times. */\r\n            if (cachedHtml)\r\n                res.send(cachedHtml);\r\n\r\n            let metadataResponses = [];\r\n\r\n            if (req.query.project) { /** Lets you input an url to log viewer in order to use that to get metadata */\r\n                const url = `http://${req.query.project}-log-viewer.c4.fruster.se/api/bus/request`;\r\n\r\n                console.log(\"using\", url);\r\n\r\n                metadataResponses = await utils.httpRequest(\"POST\", url, {\r\n                    maxResponses: 10000,\r\n                    message: {},\r\n                    subject: \"metadata\"\r\n                });\r\n            } else\r\n                metadataResponses = await bus.requestMany({\r\n                    skipOptionsRequest: true,\r\n                    subject: \"metadata\",\r\n                    maxResponses: 10000,\r\n                    message: { reqId: uuid.v4() }\r\n                });\r\n\r\n\r\n            let schemasWithErrors;\r\n            const promises = [];\r\n            const allEndpoints = {};\r\n\r\n            metadataResponses.forEach(response => {\r\n                if (!response.from) /** Just in case this happens we don't want the whole page to not load. */\r\n                    response.from = { service: \"\", instanceId: \"\" };\r\n\r\n                const serviceName = response.from && response.from.service === \"n/a\" ? response.from.instanceId : response.from ? response.from.service : \"na\";\r\n                const fixedServiceName = serviceName.replace(\"n/a\", \"na\");\r\n\r\n                if (!response.data)\r\n                    return;\r\n\r\n                const promise = utils.derefJsonSchema(response.data.schemas, fixedServiceName)\r\n                    .then((derefResp) => {\r\n                        if (!derefResp)\r\n                            return;\r\n\r\n                        const schemas = derefResp.schemas;\r\n\r\n                        if (derefResp.errors && Object.keys(derefResp.errors).length > 0) {\r\n                            schemasWithErrors = {};\r\n                            schemasWithErrors[fixedServiceName] = derefResp.errors.map(e => e.id);\r\n                        }\r\n\r\n                        response.data.exposing.map((object, i) => {\r\n                            allEndpoints[object.subject] = object.subject;\r\n\r\n                            if (object.subject.includes(\"http\")) parseEndpoint(object, 2, \"http\", schemas, fixedServiceName, response.from.instanceId);\r\n                            else if (object.subject.includes(\"ws\")) parseEndpoint(object, 2, \"ws\", schemas, fixedServiceName, response.from.instanceId);\r\n                            else parseEndpoint(object, 0, \"service\", schemas, fixedServiceName, response.from.instanceId);\r\n                        });\r\n                    });\r\n\r\n                promises.push(promise);\r\n            });\r\n\r\n            await Promise.all(promises);\r\n\r\n            Object.keys(endpointsByType).forEach(endpointType => {\r\n                sortAfterEndpointName(endpointsByType[endpointType]);\r\n            });\r\n\r\n            const state = { endpointsByType, schemasPerService, schemasWithErrors, allEndpoints, config };\r\n            const appString = renderToString(<App {...state} />);\r\n            const renderedHtml = template({\r\n                body: appString,\r\n                title: `${config.projectName} API documentation`,\r\n                initialState: JSON.stringify(state)\r\n            });\r\n\r\n            cachedHtml = renderedHtml;\r\n\r\n            if (!res.headersSent)\r\n                res.send(cachedHtml);\r\n\r\n        } catch (err) {\r\n            log.error(err);\r\n            res.json(err);\r\n        }\r\n    });\r\n\r\n    app.listen(port);\r\n    console.log(` \r\n\r\n================================================\r\n    Fruster\r\n================================================\r\n     ##  ###  ###    ###   ##   ##  \r\n    #  # #  #  #     #  # #  # #  # \r\n    #### ###   #     #  # #  # #    \r\n    #  # #     #     #  # #  # #  # \r\n    #  # #    ###    ###   ##   ##  \r\n================================================\r\n    Server running at http://localhost:${port}/\r\n================================================\r\n    `);\r\n    console.log(`Server running at http://localhost:${port}/`);\r\n}\r\n\r\n/**\r\n * Parses an endpoint into a format that can be used by the renderer.\r\n * \r\n * @param {Object} object response object\r\n * @param {Number} splitIndex index of endpoint identifier (http.post.>>user<< for http and >>user-service<<.create-user for service).\r\n * @param {String} type type of endpoint \r\n * @param {Array<Object>} schemas schemas for response\r\n * @param {String} serviceName name of service\r\n * @param {String} instanceId \r\n */\r\nfunction parseEndpoint(object, splitIndex, type, schemas, serviceName, instanceId) {\r\n    if (!object.subject) {\r\n        console.log(\"Could not parse endpoint; No subject...?\", object);\r\n        return;\r\n    }\r\n\r\n    const splits = object.subject.split(\".\");\r\n\r\n    if (splits[splitIndex] === \"health\")\r\n        return;\r\n\r\n    object.instanceId = instanceId;\r\n    object.serviceName = serviceName;\r\n    object.schemas = schemas;\r\n\r\n    if (!endpointsByType[type][splits[splitIndex]])\r\n        endpointsByType[type][splits[splitIndex]] = [];\r\n\r\n    endpointsByType[type][splits[splitIndex]] = ViewUtils.addUnique(object, endpointsByType[type][splits[splitIndex]]);\r\n\r\n    if (!object.cUrl && object.subject.includes(\"http\"))\r\n        object.cUrl = getCUrlFromEndpoint(object, schemas);\r\n\r\n    if (!schemasPerService[serviceName])\r\n        schemasPerService[serviceName] = schemas;\r\n}\r\n\r\n/**\r\n * Generates a cUrl from an endpoint.\r\n * \r\n * @param {Object} endpoint endpoint data\r\n * @param {Array<Object>} schemas \r\n */\r\nfunction getCUrlFromEndpoint(endpoint, schemas) {\r\n    const requestSchema = schemas.find(s => s && s.id === endpoint.requestSchema);\r\n    const parsedSubject = ViewUtils.parseSubjectToAPIUrl(endpoint.subject);\r\n\r\n    let body;\r\n\r\n    /** Adds request body if endpoint has a request schema */\r\n    if (requestSchema)\r\n        body = JSON.stringify(requestSchema.sample);\r\n\r\n    /** if endpoint uses wildcard method we use GET since wildcard/star is not a valid cUrl method */\r\n    if (parsedSubject.method === \"*\")\r\n        parsedSubject.method = \"GET\";\r\n\r\n    let authHeader = \" \";\r\n\r\n    /** Adds a cookie field if authentication is needed to access endpoint */\r\n    if ((endpoint.permissions && endpoint.permissions.length > 0) || endpoint.mustBeLoggedIn)\r\n        authHeader = \" --cookie jwt={{JWT_TOKEN}} \";\r\n\r\n    const cUrl = `curl -X ${parsedSubject.method} ${authHeader ? `${authHeader}` : \"\"} ${body ? `-H \"Content-Type: application/json\" -d '${body}'` : \"\"} ${config.apiRoot + parsedSubject.url}`;\r\n\r\n    return ViewUtils.replaceAll(cUrl, \"  \", \" \");\r\n}\r\n\r\n/**\r\n * @param {Object} endpoints \r\n */\r\nfunction sortAfterEndpointName(endpoints) {\r\n    if (endpoints) {\r\n        Object.keys(endpoints)\r\n            .forEach(serviceName => {\r\n                endpoints[serviceName] = endpoints[serviceName].sort((a, b) => {\r\n                    const aU = a.subject.toUpperCase();\r\n                    const bU = b.subject.toUpperCase();\r\n\r\n                    if (aU > bU) return 1;\r\n                    else if (aU < bU) return -1;\r\n                    else return 0;\r\n                });\r\n            });\r\n    }\r\n}\r\n\r\nfunction resetCache() {\r\n    console.log(\"Resetting cache\");\r\n\r\n    schemasPerService = {};\r\n    endpointsByType = { http: {}, service: {}, ws: {} };\r\n    cachedHtml = undefined;\r\n\r\n    console.log(\"Reset result:\",\r\n        \"\\n endpointsByType.http:\", Object.keys(endpointsByType.http).length,\r\n        \"\\n endpointsByType.service:\", Object.keys(endpointsByType.service).length,\r\n        \"\\n endpointsByType.ws:\", Object.keys(endpointsByType.ws).length,\r\n        \"\\n schemasPerService:\", Object.keys(schemasPerService).length,\r\n        \"\\n cachedHtml === undefined:\", cachedHtml === undefined);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/server.js","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 4\n// module chunks = 0","import \"babel-core/register\";\r\nimport \"babel-polyfill\";\r\nimport React from \"react\";\r\nimport ViewUtils from \"../utils/ViewUtils\";\r\nimport EndpointContainer from \"./components/endpoint-container/EndpointContainer\";\r\nimport EndpointsTableOfContentsComponent from \"./components/endpoints-table-of-contents/EndpointsTableOfContentsComponent\";\r\nimport ErrorMessageComponent from \"./components/error-message/ErrorMessageComponent\";\r\nimport ToolbarComponent from \"./components/toolbar/ToolbarComponent\";\r\nimport { ApiDocContext } from \"./Context\";\r\n\r\n\r\nexport default class App extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.numberOfEndpoints = Object.keys(this.props.endpointsByType.http).length\r\n            + Object.keys(this.props.endpointsByType.service).length\r\n            + Object.keys(this.props.endpointsByType.ws).length;\r\n\r\n        this.state = {\r\n            config: this.props.config,\r\n            backupEndpointsByType: this.props.endpointsByType,\r\n            endpointsByType: this.props.endpointsByType,\r\n            isFilteredResult: false,\r\n            filter: (e) => {\r\n                return this.filter(e);\r\n            },\r\n            changeFilterType: (e) => {\r\n                return this.changeFilterType(e);\r\n            },\r\n            resetFilter: () => {\r\n                return this.resetFilter();\r\n            },\r\n            filterBy: \"subject\"\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ApiDocContext.Provider\r\n                value={this.state}>\r\n\r\n                <div className=\"container\">\r\n                    <ErrorMessageComponent\r\n                        numberOfEndpoints={this.numberOfEndpoints}\r\n                        schemasWithErrors={this.props.schemasWithErrors}\r\n                        schemasPerService={this.props.schemasPerService} />\r\n\r\n                    <a href=\"#\">\r\n                        <h1>{this.props.config.projectName ? this.props.config.projectName + \" \" : \"\"}API</h1>\r\n                    </a>\r\n\r\n                    <h4>Table of contents</h4>\r\n\r\n                    <div className=\"row table-of-contents\">\r\n\r\n                        {\r\n                            this.state.isFilteredResult &&\r\n                            <h5 style={{ marginLeft: \"15px\", color: \"#ff6969\" }}>\r\n                                <b>Note:</b><i>Showing filtered result</i>. <a className=\"clickable\" onClick={this.resetFilter}>Reset</a>\r\n                            </h5>\r\n                        }\r\n\r\n                        <EndpointsTableOfContentsComponent type=\"Http\" />\r\n                        <EndpointsTableOfContentsComponent type=\"Service\" />\r\n                        <EndpointsTableOfContentsComponent type=\"Ws\" />\r\n\r\n                    </div>\r\n\r\n                    <div className=\"clearfix\" />\r\n\r\n                    {/* {this.state.isFilteredResult ? this.hasEndpoints(\"http\") : true && */}\r\n                    <span>\r\n                        <a href=\"#http-endpoints\">\r\n                            <h1 id=\"http-endpoints\">Http endpoints</h1>\r\n                        </a>\r\n                        {this.listEndpointDetails(\"http\")}\r\n                    </span>\r\n\r\n\r\n                    {/* {this.state.isFilteredResult ? this.hasEndpoints(\"ws\") : true && */}\r\n                    <span>\r\n                        <a href=\"#ws-endpoints\">\r\n                            <h1 id=\"ws-endpoints\">Ws endpoints</h1>\r\n                        </a>\r\n                        {this.listEndpointDetails(\"ws\")}\r\n                    </span>\r\n\r\n\r\n                    {/* {this.state.isFilteredResult ? this.hasEndpoints(\"service\") : true && */}\r\n                    <span>\r\n                        <a href=\"#service-endpoints\">\r\n                            <h1 id=\"service-endpoints\">Service endpoints</h1>\r\n                        </a>\r\n                        {this.listEndpointDetails(\"service\")}\r\n                    </span>\r\n\r\n                </div>\r\n\r\n                <br />\r\n\r\n                <ToolbarComponent />\r\n\r\n            </ApiDocContext.Provider>\r\n        );\r\n    }\r\n\r\n    hasEndpoints(type) {\r\n        const endpoints = this.state.endpointsByType[type];\r\n\r\n        if (Object.keys(endpoints).some(key => endpoints[key].length > 0))\r\n            return true;\r\n    }\r\n\r\n    /**\r\n     * Renders the details for all endpoints within a category (http, service & ws).\r\n     *\r\n    * @param {String } type\r\n    */\r\n    listEndpointDetails(type) {\r\n        if (Object.keys(this.state.endpointsByType[type]).length === 0)\r\n            return \"No endpoints\";\r\n\r\n        return ViewUtils\r\n            .sortedForEach(this.state.endpointsByType[type], (endpoints, serviceName, index) => {\r\n                if (endpoints.length === 0)\r\n                    return;\r\n\r\n                return (\r\n                    <EndpointContainer\r\n                        key={`${serviceName}`}\r\n                        serviceName={serviceName}\r\n                        type={type}\r\n                        endpoints={endpoints}\r\n                        allEndpoints={this.props.allEndpoints} />\r\n                );\r\n            })\r\n    }\r\n\r\n    async changeFilterType(e) {\r\n        e.persist();\r\n\r\n        await this.setState({ filterBy: e.target.value });\r\n\r\n        this.filter(e);\r\n    }\r\n\r\n    async filter(e) {\r\n        window.scrollTo(0, 0);\r\n\r\n        const value = new String(e.target.value).toLowerCase().split(\"/\").join(\".\");\r\n        const valueArray = value.split(\" \");\r\n        const that = this;\r\n\r\n        let service;\r\n        let http;\r\n        let ws;\r\n\r\n        switch (this.state.filterBy) {\r\n            case \"permissions\":\r\n                service = filterByPermissions(\"service\");\r\n                http = filterByPermissions(\"http\");\r\n                ws = filterByPermissions(\"ws\");\r\n                break;\r\n            case \"docs\":\r\n                service = filterByDocs(\"service\");\r\n                http = filterByDocs(\"http\");\r\n                ws = filterByDocs(\"ws\");\r\n                break;\r\n            case \"subject\":\r\n            default:\r\n                filterBySubject(\"service\");\r\n                filterBySubject(\"http\");\r\n                filterBySubject(\"ws\");\r\n                break;\r\n        }\r\n\r\n        await this.setState({ endpointsByType: { service, http, ws }, isFilteredResult: value !== \"\" });\r\n\r\n        function filterBySubject(type) {\r\n            const foundEndpoints = {};\r\n\r\n            Object\r\n                .keys(that.state.backupEndpointsByType[type])\r\n                .forEach(serviceName => {\r\n                    const endpoints = that.state.backupEndpointsByType[type][serviceName];\r\n\r\n                    endpoints.forEach(endpoint => {\r\n                        let containsSearchWord = true;\r\n\r\n                        valueArray.forEach(value => {\r\n                            if (value !== \"\")\r\n                                containsSearchWord = containsSearchWord && endpoint.subject.includes(value);\r\n                        });\r\n\r\n                        if (!containsSearchWord)\r\n                            endpoint.hidden = true;\r\n\r\n                    });\r\n                });\r\n        }\r\n\r\n        function filterByPermissions(type) {\r\n            const foundEndpoints = {};\r\n\r\n            Object\r\n                .keys(that.state.backupEndpointsByType[type])\r\n                .forEach(serviceName => {\r\n                    const endpoints = that.state.backupEndpointsByType[type][serviceName];\r\n\r\n                    foundEndpoints[serviceName] = endpoints.filter(endpoint => {\r\n                        if (!endpoint.permissions) return false;\r\n\r\n                        let containsSearchWord = false;\r\n\r\n                        endpoint.permissions.forEach(permission => {\r\n                            valueArray.forEach(value => {\r\n                                if (value !== \"\")\r\n                                    containsSearchWord = permission.includes(value);\r\n                            });\r\n                        });\r\n\r\n                        return containsSearchWord;\r\n                    });\r\n                });\r\n\r\n            return foundEndpoints;\r\n        }\r\n\r\n        function filterByDocs(type) {\r\n            const foundEndpoints = {};\r\n\r\n            Object\r\n                .keys(that.state.backupEndpointsByType[type])\r\n                .forEach(serviceName => {\r\n                    const endpoints = that.state.backupEndpointsByType[type][serviceName];\r\n\r\n                    foundEndpoints[serviceName] = endpoints.filter(endpoint => {\r\n                        const flatEndpointObj = squishObject(endpoint.docs);\r\n\r\n                        let comparisonString = \"\";\r\n\r\n                        if (flatEndpointObj)\r\n                            Object.keys(flatEndpointObj).forEach(key => comparisonString += `${flatEndpointObj[key]}`);\r\n\r\n                        for (let inputValue of valueArray) {\r\n                            if (comparisonString.toLowerCase().includes(inputValue.toLowerCase()))\r\n                                return true;\r\n                        }\r\n\r\n                        return false;\r\n                    });\r\n                });\r\n\r\n            return foundEndpoints;\r\n        }\r\n\r\n        /**\r\n        * @param {Object} obj \r\n        *\r\n        * @return {Object}\r\n        */\r\n        function squishObject(obj) {\r\n            if (!obj) return;\r\n\r\n            const output = {};\r\n\r\n            Object.keys(obj)\r\n                .forEach(key => {\r\n                    if (obj[key] && typeof obj[key] === \"object\") {\r\n                        const squishedSubObject = squishObject(obj[key]);\r\n\r\n                        if (squishedSubObject)\r\n                            Object.keys(squishedSubObject)\r\n                                .forEach(subObjKey => {\r\n                                    output[subObjKey] = squishedSubObject[subObjKey];\r\n                                });\r\n                    } else {\r\n                        output[key] = obj[key];\r\n                    }\r\n                });\r\n\r\n            return output;\r\n        }\r\n    }\r\n\r\n    resetFilter = () => {\r\n        this.setState({\r\n            isFilteredResult: false,\r\n            endpointsByType: this.props.endpointsByType\r\n        });\r\n    };\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/App.js","module.exports = require(\"babel-core/register\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-core/register\"\n// module id = 6\n// module chunks = 0","const config = require(\"../../config\");\r\n\r\n\r\nclass ViewUtils {\r\n\r\n    constructor() { }\r\n\r\n    /**\r\n     * @typedef {Object} ParsedSubject\r\n     * @property {String} method\r\n     * @property {String} url\r\n     */\r\n\r\n    /**\r\n     * Parses a subject, picks out the method and transforms to url.\r\n     * \r\n     * @param {String} subject\r\n     * \r\n     * @return {ParsedSubject}\r\n     */\r\n    static parseSubjectToAPIUrl(subject) {\r\n        let outputURL = subject;\r\n        outputURL = module.exports.replaceAll(outputURL, \".\", \"/\");\r\n        outputURL = outputURL.replace(\"http/\", \"\");\r\n\r\n        const indexOfFirstSlash = outputURL.indexOf(\"/\");\r\n        const method = outputURL.substring(0, indexOfFirstSlash);\r\n\r\n        outputURL = outputURL.substring(indexOfFirstSlash);\r\n\r\n        return {\r\n            method: method.toUpperCase(),\r\n            url: outputURL\r\n        };\r\n    }\r\n\r\n    /**\r\n * Replaces all instances of word in string\r\n * \r\n * @param {String} target target string\r\n * @param {String} search string to be replaced\r\n * @param {String} replacement string to replace with\r\n * \r\n * @return {String} {target} string with {search} replaced by {replacement}\r\n */\r\n    static replaceAll(target, search, replacement) {\r\n        return target.split(search).join(replacement);\r\n    }\r\n\r\n    /**\r\n     * Adds item to array only if it does not already exist.\r\n     * \r\n     * @param {Object} object object to add to array\r\n     * @param {Array} array array to add object to\r\n     * \r\n     * @return {Array}\r\n     */\r\n    static addUnique(object, array) {\r\n        const objectExists = array.find((endpoint, index, array) => {\r\n            /** Makes sure we do not add the same endpoint twice */\r\n            const isObject = endpoint.subject === object.subject && endpoint.serviceName.split(\".\")[0] === object.serviceName.split(\".\")[0];\r\n\r\n            if (isObject)\r\n                array[index] = object;\r\n\r\n            return isObject;\r\n        });\r\n\r\n        if (!objectExists)\r\n            array.push(object);\r\n\r\n        return array;\r\n    }\r\n\r\n    /**\r\n     * Adds colors to selected words, defined in the config.\r\n     * \r\n     * @param {String} string \r\n     */\r\n    static getColorCodedTitle(string) {\r\n        const colorCodedWords = Object.keys(config.colorCodedWords).reverse();\r\n\r\n        for (let i = 0; i < colorCodedWords.length; i++) {\r\n            string = ViewUtils.replaceAll(string, colorCodedWords[i],\r\n                `<span class=\"${config.colorCodedWords[colorCodedWords[i]]}\">${colorCodedWords[i]}</span>`);\r\n        }\r\n\r\n        return string;\r\n    }\r\n\r\n    /**\r\n     * Goes through keys in object (as well as its sub objects and arrays), sorts the keys and reinserts data in sorted order.\r\n     * \r\n     * @param {Object} obj object to sort keys for\r\n     */\r\n    static sortObject(obj) {\r\n        if ((obj instanceof Array) || !(obj instanceof Object))\r\n            return obj;\r\n\r\n        return sortLayer(obj);\r\n\r\n        function sortLayer(layer) {\r\n            const output = {};\r\n\r\n            Object.keys(layer).sort().forEach(key => {\r\n                if (!!layer[key] && typeof layer[key] === \"object\" && !(layer[key] instanceof Array)) {\r\n                    /** If object, loop through another layer */\r\n                    output[key] = sortLayer(layer[key]);\r\n                } else if (!!layer[key] && (layer[key] instanceof Array)) {\r\n                    /**If array; sort array */\r\n                    layer[key].sort();\r\n\r\n                    if (typeof layer[key][0] === \"object\") {\r\n                        /** If array contains objects; loop through and sort each object */\r\n                        const sortedObj = sortLayer(layer[key]);\r\n                        output[key] = [];\r\n\r\n                        Object.keys(sortedObj).forEach(sortedObjkey => {\r\n                            /** Add back objects in an array (To prevent result being converted from array to object while using Object.keys) */\r\n                            if (!output[key])\r\n                                output[key] = [];\r\n\r\n                            output[key].push(sortedObj[sortedObjkey]);\r\n                        });\r\n                    } else {\r\n                        output[key] = layer[key];\r\n                    }\r\n                } else {\r\n                    output[key] = layer[key];\r\n                }\r\n            });\r\n\r\n            return output;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Loops through an object or array.\r\n     *\r\n     * @param {Object | Array} toLoop\r\n     * @param {Function} handler\r\n    */\r\n    static sortedForEach(toLoop, handler) {\r\n        if (!toLoop || Object.keys(toLoop).length === 0)\r\n            return ``;\r\n\r\n        let i = 0;\r\n\r\n        return Object.keys(toLoop)\r\n            .sort()\r\n            .map(key => {\r\n                i++;\r\n                return handler(toLoop[key], key, i);\r\n            });\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = ViewUtils;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ViewUtils.js","module.exports = {\r\n\r\n    bus: process.env.BUS || \"nats://localhost:4222\",\r\n\r\n    /** Port to be running webserver on */\r\n    port: parseInt((process.env.PORT || 8080), 10),\r\n\r\n    /** The url to the api root, in order to display accurate urls */\r\n    apiRoot: process.env.API_ROOT || \"{{host}}\",\r\n\r\n    /** Project name in order to display the name in the header and title of the page */\r\n    projectName: process.env.PROJECT_NAME || \"\",\r\n\r\n    /** \r\n     * Words to be color coded in service endpoints. Uses the structure {cssClass}:{word},{word};{cssClass}:{word},{word}; \r\n     * Note: It goes through this list in reverse order so any extension words should be latter; e.g. `create,created` = it will look for created first and then created. \r\n    */\r\n    colorCodedWords: parseColorCodedWords(process.env.COLOR_CODED_WORDS ||\r\n        \"GET:get,find;read;DELETE:delete,deleted,remove,removed,cancel,canceled,cancelled,decline,declined,unregister,unregistered;POST:create,created,post,posted,add,added,generate,generated,approve,approved,send,sent,resend,resent,set,validate,validated,verify,verified,authenticate,authenticated,decode,decode;PUT:put,update,updated,change,changed,reset;PUB:pub\")\r\n\r\n};\r\n\r\nfunction parseColorCodedWords(string) {\r\n    const output = {};\r\n    const rules = string.split(\";\");\r\n\r\n    rules.forEach(rule => {\r\n        const indexOfColon = rule.indexOf(\":\");\r\n        const words = rule.substring(indexOfColon + 1).split(\",\");\r\n\r\n        words.forEach(word => {\r\n            output[word] = rule.substring(0, indexOfColon);\r\n        });\r\n    });\r\n    return output;\r\n}\n\n\n// WEBPACK FOOTER //\n// ./config.js","import React from \"react\";\r\nimport EndpointDetailsComponent from \"../endpoint-details/EndpointDetailsComponent\";\r\n\r\n\r\n\r\nexport default class EndpointContainer extends React.Component {\r\n\r\n    state = {\r\n        checked: true,\r\n        checkboxes: EndpointContainer.prepareCheckboxes(this.props.endpoints)\r\n    };\r\n\r\n    // shouldComponentUpdate() {\r\n    //     return false;\r\n    // }\r\n\r\n    static prepareCheckboxes(endpoints) {\r\n        const returnObj = {};\r\n\r\n        endpoints.forEach(endpoint => returnObj[endpoint.subject] = true);\r\n\r\n        return returnObj;\r\n    }\r\n\r\n    getCheckedEndpoints() {\r\n        return Object.keys(this.state.checkboxes)\r\n            .map(subject => {\r\n                if (this.state.checkboxes[subject])\r\n                    return subject;\r\n            })\r\n            .filter(subject => !!subject)\r\n            .join(\",\");\r\n    }\r\n\r\n    checkAll() {\r\n        const newCheckedStatus = !this.state.checked;\r\n        const checkboxesNewStatus = {};\r\n\r\n        Object.keys(this.state.checkboxes).forEach(subject => checkboxesNewStatus[subject] = newCheckedStatus);\r\n\r\n        this.setState({\r\n            checked: newCheckedStatus,\r\n            checkboxes: checkboxesNewStatus\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div\r\n                id={this.props.serviceName + \"-\" + (this.props.type || \"service\")}\r\n                className={\"service-container \" + this.props.serviceName + \"-\"}>\r\n\r\n                <a href={\"#\" + this.props.serviceName + \"-\" + (this.props.type || \"service\")}><h2>{this.props.serviceName}</h2></a>\r\n\r\n                {\r\n                    this.props.type === \"service\" &&\r\n                    <span className=\"service-btn\">\r\n                        <label\r\n                            htmlFor={this.props.serviceName + \"-\" + (this.props.type || \"service\") + \"-\" + \"select-all\"}>\r\n                            Select / deselect all\r\n                        </label> <input\r\n                            id={this.props.serviceName + \"-\" + (this.props.type || \"service\") + \"-\" + \"select-all\"}\r\n                            onChange={e => this.checkAll()}\r\n                            checked={this.state.checked}\r\n                            type=\"checkbox\" /> |\r\n\r\n                        <a href={`/service-client/${this.props.serviceName}?subjects=${encodeURIComponent(this.getCheckedEndpoints())}`}>\r\n                            <button className=\"action\">Download service client <span className=\"glyphicon glyphicon-download\"></span></button>\r\n                        </a>\r\n                    </span>\r\n                }\r\n\r\n                {this.getEndpoints()}\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onCheckboxChecked = (e) => {\r\n        this.setState({ checkboxes: { ...this.state.checkboxes, [e.target.name]: e.target.checked }, checked: false });\r\n    }\r\n\r\n    /**\r\n     * Prepares all endpoints within this category\r\n     */\r\n    getEndpoints() {\r\n        return this.props.endpoints\r\n            .map((endpoint, index) => {\r\n                if (endpoint.hidden)\r\n                    return <span key={`endpoint-${endpoint.subject}`} />;\r\n\r\n                const schemas = endpoint.schemas\r\n                    .filter(schema => {\r\n                        if (schema) {\r\n                            switch (true) {\r\n                                case schema.id === endpoint.requestSchema:\r\n                                case schema.id === endpoint.responseSchema:\r\n                                case endpoint.requestSchema && typeof endpoint.requestSchema === \"object\" && schema.id === endpoint.requestSchema.id:\r\n                                case endpoint.responseSchema && typeof endpoint.responseSchema && schema.id === endpoint.responseSchema.id:\r\n                                    return schema;\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                if (endpoint.requestSchema && typeof endpoint.requestSchema === \"object\") {\r\n                    if (!schemas.find(schema => schema.id === endpoint.requestSchema.id))\r\n                        schemas.push(endpoint.requestSchema);\r\n\r\n                    endpoint.requestSchema = endpoint.requestSchema.id;\r\n                }\r\n\r\n                if (endpoint.responseSchema && typeof endpoint.responseSchema === \"object\") {\r\n                    if (!schemas.find(schema => schema.id === endpoint.responseSchema.id))\r\n                        schemas.push(endpoint.responseSchema);\r\n\r\n                    endpoint.responseSchema = endpoint.responseSchema.id;\r\n                }\r\n\r\n                return (\r\n                    <span key={`endpoint-${endpoint.subject}`}>\r\n                        <hr />\r\n                        <EndpointDetailsComponent\r\n                            type={this.props.type}\r\n                            endpoint={endpoint}\r\n                            schemas={schemas}\r\n                            allEndpoints={this.props.allEndpoints}\r\n                            onCheck={e => this.onCheckboxChecked(e)}\r\n                            checked={this.state.checkboxes[endpoint.subject]}\r\n                        />\r\n                    </span>\r\n                )\r\n            });\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/endpoint-container/EndpointContainer.js","import markdown from \"markdown\";\r\nimport React from \"react\";\r\nimport ViewUtils from \"../../../utils/ViewUtils\";\r\nimport { ApiDocContext } from \"../../Context\";\r\nimport JsonSchemaModalComponent from \"../modal/JsonSchemaModalComponent\";\r\nimport CopyAsCurlComponent from \"./copy-as-curl/CopyAsCurlComponent\";\r\n\r\n\r\nexport default class EndpointDetailsComponent extends React.Component {\r\n\r\n    state = {\r\n        parsedSubject: this.getParsedSubject(),\r\n        requestSchema: this.props.schemas.find(schema => schema.id === this.props.endpoint.requestSchema),\r\n        responseSchema: this.props.schemas.find(schema => schema.id === this.props.endpoint.responseSchema),\r\n        urlSubjectLink: this.getSubjectLink(),\r\n        urlSubject: this.getSubject(),\r\n        isOpen: false,\r\n        selected: false,\r\n        lastHash: \"\"\r\n    };\r\n\r\n    // shouldComponentUpdate() {\r\n    //     return false;\r\n    // }\r\n\r\n    getParsedSubject() {\r\n        if (this.parsedSubject)\r\n            return this.parsedSubject;\r\n\r\n        const parsedSubject = ViewUtils.parseSubjectToAPIUrl(this.props.endpoint.subject);\r\n        this.parsedSubject = parsedSubject;\r\n\r\n        return parsedSubject;\r\n    }\r\n\r\n    getSubjectLink() {\r\n        const parsedSubject = this.getParsedSubject();\r\n\r\n        if (this.props.type === \"http\")\r\n            return `${parsedSubject.method}-to-${parsedSubject.url}`;\r\n        else\r\n            return this.props.endpoint.subject;\r\n    }\r\n\r\n    getSubject() {\r\n        const parsedSubject = this.getParsedSubject();\r\n\r\n        if (this.props.type === \"http\")\r\n            return `<span class=\"${parsedSubject.method}\">${parsedSubject.method}</span> to ${parsedSubject.url}`;\r\n        else\r\n            return ViewUtils.getColorCodedTitle(this.props.endpoint.subject);\r\n    }\r\n\r\n    componentDidMount() {\r\n        addEventListener(\"hashchange\", () => this.reactToHashChange(), false);\r\n        setTimeout(() => this.reactToHashChange());\r\n    }\r\n\r\n    async reactToHashChange() {\r\n        const decodedURI = decodeURI(window.location.hash);\r\n        const newHashWithoutTab = decodedURI.substring(0, decodedURI.length - 1);\r\n        const lastHashWithoutTab = this.state.lastHash.substring(0, this.state.lastHash.length - 1);\r\n\r\n        switch (true) {\r\n            case decodedURI === `#${this.state.urlSubjectLink}`:\r\n            case decodedURI.includes(\"?modal=\") && decodedURI.includes(`#${this.state.urlSubjectLink}?`):\r\n                /** If hash was just a tab switch we don't do anything */\r\n                if (this.state.requestSchema && decodedURI.includes(`?modal=${this.state.requestSchema.id}`)\r\n                    || this.state.responseSchema && decodedURI.includes(`?modal=${this.state.responseSchema.id}`)) {\r\n                    if (newHashWithoutTab === lastHashWithoutTab)\r\n                        return;\r\n                }\r\n\r\n                this.reactToClickHash();\r\n\r\n                if (this.state.requestSchema && decodedURI.includes(`?modal=${this.state.requestSchema.id}`)) {\r\n                    if ($) $(\".modal\").modal(\"hide\");\r\n\r\n                    this.requestBodyModal.openModal();\r\n                } else if (this.state.responseSchema && decodedURI.includes(`?modal=${this.state.responseSchema.id}`)) {\r\n                    if ($) $(\".modal\").modal(\"hide\");\r\n\r\n                    if (this.responseBodyModal)\r\n                        this.responseBodyModal.openModal();\r\n                }\r\n        }\r\n\r\n        this.setState({ lastHash: decodedURI });\r\n    }\r\n\r\n    reactToClickHash() {\r\n        this.setState({\r\n            selected: true,\r\n            isOpen: true\r\n        });\r\n\r\n        setTimeout(() => this.setState({ selected: false }), 100);\r\n\r\n        if (this.markup)\r\n            this.markup.scrollIntoView(true);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ApiDocContext.Consumer>\r\n                {context => (\r\n                    <span>\r\n                        <div\r\n                            ref={ref => this.markup = ref}\r\n                            id={this.state.urlSubjectLink}\r\n                            className={`\r\n                                ${this.props.endpoint.deprecated ? \"deprecated-container\" : \"\"} container endpoint-container\r\n                                ${this.state.selected ? \"selected-animated\" : \"\"}\r\n                            `}>\r\n                            <span>\r\n                                <span>\r\n                                    <span\r\n                                        className={`endpoint-fold-btn ${this.state.isOpen ? \"open\" : \"\"}`}\r\n                                        onClick={() => this.toggleFolded()}>\r\n                                        {this.state.isOpen ?\r\n                                            <i className=\"toggle-fold-btn glyphicon glyphicon-menu-down\"></i>\r\n                                            : <i className=\"toggle-fold-btn glyphicon glyphicon-menu-right\"></i>}\r\n                                    </span>\r\n\r\n                                    <a href={\"#\" + this.state.urlSubjectLink} onClick={() => this.reactToClickHash()}>\r\n                                        <h3\r\n                                            style={{ display: \"inline-block\" }}\r\n                                            className={this.props.endpoint.deprecated ? \"deprecated\" : \"\"}>\r\n                                            <span dangerouslySetInnerHTML={{ __html: this.state.urlSubject, }}></span>\r\n                                        </h3>\r\n                                    </a>\r\n                                </span>\r\n\r\n                                <span className=\"endpoint-second-row\">\r\n                                    from {this.props.endpoint.instanceId} {this.getDeprecationNote()}\r\n\r\n                                    <CopyAsCurlComponent cUrl={this.props.endpoint.cUrl} />\r\n\r\n                                    {this.props.type === \"service\" && <input\r\n                                        type=\"checkbox\"\r\n                                        name={this.props.endpoint.subject}\r\n                                        checked={this.props.checked}\r\n                                        onChange={this.props.onCheck}\r\n                                        style={{ float: \"right\" }} />}\r\n\r\n                                </span>\r\n\r\n                            </span>\r\n\r\n                            {\r\n                                this.state.isOpen ?\r\n\r\n                                    <span>\r\n\r\n                                        {this.getEndpointDetailsTable(context)}\r\n\r\n                                        {this.getDocumentationTable()}\r\n\r\n                                    </span>\r\n\r\n                                    :\r\n                                    this.props.endpoint.docs\r\n                                    && this.props.endpoint.docs.description\r\n                                    && <span\r\n                                        onClick={e => this.toggleFolded()}\r\n                                        title={this.props.endpoint.docs ? this.props.endpoint.docs.description : \"\"}\r\n                                        className=\"short-description\"\r\n                                        dangerouslySetInnerHTML={{ __html: markdown.markdown.toHTML(this.props.endpoint.docs.description) }} />\r\n                            }\r\n\r\n                        </div>\r\n\r\n                        {\r\n                            this.state.isOpen &&\r\n\r\n                            <span>\r\n\r\n                                {this.state.requestSchema &&\r\n                                    <JsonSchemaModalComponent\r\n                                        ref={ref => { this.requestBodyModal = ref; }}\r\n                                        subject={this.props.endpoint.subject}\r\n                                        schema={this.state.requestSchema}\r\n                                        endpointUrl={this.state.urlSubjectLink}\r\n                                        isError={this.state.requestSchema ? this.state.requestSchema._error : false}\r\n                                    />}\r\n\r\n                                {this.state.responseSchema &&\r\n                                    <JsonSchemaModalComponent\r\n                                        ref={ref => { this.responseBodyModal = ref; }}\r\n                                        subject={this.props.endpoint.subject}\r\n                                        schema={this.state.responseSchema}\r\n                                        endpointUrl={this.state.urlSubjectLink}\r\n                                        isError={this.state.responseSchema ? this.state.responseSchema._error : false}\r\n                                    />}\r\n\r\n                            </span>\r\n                        }\r\n\r\n                    </span>\r\n\r\n                )}\r\n            </ApiDocContext.Consumer>\r\n        );\r\n    }\r\n\r\n    toggleFolded() {\r\n        this.setState({ isOpen: !this.state.isOpen });\r\n    }\r\n\r\n    /**\r\n     * Prepares the endpoint details table.\r\n     * \r\n     * @param {Object} context\r\n     */\r\n    getEndpointDetailsTable(context) {\r\n        return (\r\n            <table\r\n                className=\"table table\">\r\n\r\n                <thead>\r\n                    <tr>\r\n                        <th>Subject</th>\r\n                        <th>Request body</th>\r\n                        <th>Required permissions</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    <tr>\r\n                        {/* Subject */}\r\n                        <td>{this.props.endpoint.subject}</td>\r\n                        {/* Request body */}\r\n                        <td\r\n                            onClick={e => this.openRequestBodyModal(e)}\r\n                            className={`\r\n                            request-schema\r\n                            ${this.props.endpoint.serviceName} \r\n                            ${this.props.endpoint.requestSchema} \r\n                            ${(this.props.endpoint.requestSchema ? \" \" : \"deactivated\")}\r\n                            ${this.state.requestSchema && this.state.requestSchema._error ? \"has-error\" : \"\"}`}>\r\n                            <a href={this.props.endpoint.requestSchema ? `#${this.state.urlSubjectLink}?modal=${this.props.endpoint.requestSchema}` : \"#\"}\r\n                                className={this.props.endpoint.requestSchema ? \"\" : \"deactivated\"}>\r\n                                {this.props.endpoint.requestSchema || <span className=\"not-available\"> n/a</span>}\r\n                                {this.props.endpoint.requestSchema && <span className=\"glyphicon glyphicon-new-window\"></span>}\r\n                            </a>\r\n                        </td>\r\n                        {/* Required permissions */}\r\n                        <td>\r\n                            {this.getPermissions()}\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n\r\n                <thead>\r\n                    <tr>\r\n                        <th>Url</th>\r\n                        <th>Response body</th>\r\n                        <th>Must be logged in</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    <tr>\r\n                        {/* Url */}\r\n                        <td>{\r\n                            this.props.type === \"http\"\r\n                                ? context.config.apiRoot + this.state.parsedSubject.url\r\n                                : <span className=\"not-available\">n/a</span>\r\n                        }</td>\r\n\r\n                        {/* Response body */}\r\n                        <td\r\n                            onClick={e => this.openResponseBodyModal(e)}\r\n                            className={`\r\n                            response-schema\r\n                            ${this.props.endpoint.serviceName} \r\n                            ${this.props.endpoint.responseSchema} \r\n                            ${(this.props.endpoint.responseSchema ? \" \" : \"deactivated\")}\r\n                            ${this.state.responseSchema && this.state.responseSchema._error ? \"has-error\" : \"\"}`}>\r\n                            <a href={this.props.endpoint.responseSchema ? `#${this.state.urlSubjectLink}?modal=${this.props.endpoint.responseSchema}` : \"#\"}\r\n                                className={this.props.endpoint.responseSchema ? \"\" : \"deactivated\"}>\r\n                                {this.props.endpoint.responseSchema || <span className=\"not-available\">n/a</span>}\r\n                                {this.props.endpoint.responseSchema && <span className=\"glyphicon glyphicon-new-window\"></span>}\r\n                            </a>\r\n                        </td>\r\n\r\n                        {/* Must be logged in */}\r\n                        <td\r\n                            className={(this.props.endpoint.permissions && this.props.endpoint.permissions.length > 0) ? true.toString() : this.props.endpoint.mustBeLoggedIn.toString()}>\r\n                            {(this.props.endpoint.permissions && this.props.endpoint.permissions.length > 0) ? true.toString() : this.props.endpoint.mustBeLoggedIn.toString()}\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n\r\n            </table>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Prepares the description table\r\n     */\r\n    getDocumentationTable() {\r\n        return (\r\n            <table\r\n                className=\"table table\">\r\n\r\n                <thead>\r\n                    <tr>\r\n                        <th>Documentation</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    <tr>\r\n                        <td className=\"description\">\r\n                            {this.props.endpoint.docs ?\r\n                                <div>\r\n                                    {this.props.endpoint.docs.description && <div className=\"doc-entry-title\">Description</div>}\r\n                                    {this.props.endpoint.docs.description\r\n                                        ? <span className=\"description-value\" dangerouslySetInnerHTML={{ __html: markdown.markdown.toHTML(this.props.endpoint.docs.description), }}></span>\r\n                                        : <span className=\"not-available\">n/a</span>}\r\n                                    <span className=\"url-params-desc\">{this.props.endpoint.docs.params ? this.getDocEntry(this.props.endpoint.docs.params, \"Url parameters\") : \"\"}</span>\r\n                                    <span className=\"query-params-desc\">{this.props.endpoint.docs.query ? this.getDocEntry(this.props.endpoint.docs.query, \"Query parameters\") : \"\"}</span>\r\n                                    <span className=\"errors-desc\">{this.props.endpoint.docs.errors ? this.getDocEntry(this.props.endpoint.docs.errors, \"Errors\") : \"\"}</span>\r\n                                </div> : <span className=\"not-available\">n/a</span>}\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n\r\n            </table>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Opens a modal with the request json schema.\r\n     * \r\n     * @param {Object} e \r\n     */\r\n    openRequestBodyModal(e) {\r\n        if (e.nativeEvent.which !== 2) {\r\n            e.preventDefault();\r\n\r\n            if (this.requestBodyModal)\r\n                this.requestBodyModal.openModal();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Opens a modal with the response json schema.\r\n     * \r\n     * @param {Object} e \r\n     */\r\n    openResponseBodyModal(e) {\r\n        if (e.nativeEvent.which !== 2) {\r\n            e.preventDefault();\r\n\r\n            if (this.responseBodyModal)\r\n                this.responseBodyModal.openModal();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Renders all permissions no matter if a simple array or array in array.\r\n     */\r\n    getPermissions() {\r\n        if (this.props.endpoint.permissions) {\r\n            return this.props.endpoint.permissions.map((permissions, index) => {\r\n                let permissionsHmtl;\r\n\r\n                if (permissions instanceof Array)\r\n                    permissionsHmtl = permissions.map((permission, index) => {\r\n                        return (\r\n                            <span\r\n                                key={`permissions-${index}`}\r\n                                className=\"permission\">\r\n                                {permission}\r\n                            </span>\r\n                        );\r\n                    });\r\n                else\r\n                    permissionsHmtl = <span className=\"permission\">{permissions}</span>;\r\n\r\n                return (\r\n                    <span\r\n                        key={`this-props-endpoint-permissions-${index}`}\r\n                        className=\"permission-group\">\r\n                        {permissionsHmtl}\r\n                    </span>\r\n                );\r\n            });\r\n        } else {\r\n            return (\r\n                <span className=\"permission-group\">\r\n                    <span className=\"permission\">none</span>\r\n                </span>\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Renders documentation entry.\r\n     * \r\n     * @param {Object|Array} input \r\n     * @param {String} title \r\n     */\r\n    getDocEntry(input, title) {\r\n        if (Object.keys(input).length > 0) {\r\n            return (\r\n                <div>\r\n                    <div className=\"doc-entry-title\">{title}</div>\r\n                    {\r\n                        Object.keys(input).map((key, index) => {\r\n                            const value = input[key];\r\n\r\n                            return (\r\n                                <span key={`get-doc-entry-${index}`}>\r\n                                    <div className=\"description-item\">\r\n                                        <span className=\"description-key\">{key}</span>: <span className=\"description-value\">{value}</span>\r\n                                    </div>\r\n                                </span>\r\n                            );\r\n                        })\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns styled and \"linkified\" deprecation note\r\n     */\r\n    getDeprecationNote() {\r\n        if (this.props.endpoint.deprecated && typeof this.props.endpoint.deprecated === \"string\") {\r\n            return (\r\n                <span>\r\n                    | <span className=\"deprecated-description\">Note: </span>\r\n                    <span className=\"deprecated-note\" dangerouslySetInnerHTML={{ __html: this.getDeprecatedHtml(this.props.endpoint.deprecated) }} ></span>\r\n                </span>\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds links to endpoints referenced in the deprecated text.\r\n     * \r\n     * @param {String} description \r\n     */\r\n    getDeprecatedHtml(description) {\r\n        const parts = description.split(\" \");\r\n        const partsWithEndpoint = {};\r\n        let endpointsExists = false;\r\n\r\n        for (let i = 0; i < parts.length; i++) {\r\n            let partToCompare = parts[i];\r\n            let partHasDot = false;\r\n\r\n            if (partToCompare[partToCompare.length - 1] === \".\") {\r\n                partToCompare = partToCompare.substring(0, partToCompare.length - 1);\r\n                partHasDot = true;\r\n            }\r\n\r\n            if (this.props.allEndpoints[partToCompare]) {\r\n                endpointsExists = true;\r\n                parts[i] = partToCompare;\r\n\r\n                partsWithEndpoint[parts[i]] = parts[i];\r\n\r\n                if (partHasDot)\r\n                    parts.splice(i + 1, 0, \".\");\r\n            }\r\n        }\r\n\r\n        if (!endpointsExists)\r\n            return description;\r\n\r\n        Object.keys(partsWithEndpoint).\r\n            forEach(key => {\r\n                if (key.includes(\"http\")) {\r\n                    const parsedHttpEndpoint = ViewUtils.parseSubjectToAPIUrl(key);\r\n\r\n                    partsWithEndpoint[key] = `\r\n                    <a href=\"#${parsedHttpEndpoint.method}-to-${parsedHttpEndpoint.url}\">\r\n                    <span class=\"${parsedHttpEndpoint.method}\">${parsedHttpEndpoint.method}</span>\r\n                     to ${parsedHttpEndpoint.url}\r\n                    </a>`;\r\n                } else\r\n                    partsWithEndpoint[key] = `<a href=\"#${key}\">${ViewUtils.getColorCodedTitle(key)}</a>`;\r\n            });\r\n\r\n        const output = [];\r\n\r\n        parts.forEach(pt => {\r\n            if (partsWithEndpoint[pt])\r\n                output.push(partsWithEndpoint[pt]);\r\n            else\r\n                output.push(pt);\r\n        });\r\n\r\n        return `<span>${output.join(\" \")}</span>`;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/endpoint-details/EndpointDetailsComponent.js","module.exports = require(\"markdown\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"markdown\"\n// module id = 11\n// module chunks = 0","import React from \"react\";\r\nimport serverConfig from \"../../config\";\r\n\r\nexport const ApiDocContext = React.createContext();\n\n\n// WEBPACK FOOTER //\n// ./src/app/Context.js","import hljs from \"highlight.js\";\r\nimport React from \"react\";\r\nimport ViewUtils from \"../../../utils/ViewUtils\";\r\nimport CopyToClipboardComponent from \"../copy-to-clipboard/CopyToClipboardComponent\";\r\n\r\nhljs.configure({ languages: [\"json\"] });\r\n\r\nfunction getTabFromHash() {\r\n    try {\r\n        const decodedURIHash = decodeURI(window.location.hash);\r\n        const windowLocationTab = Number.parseInt(decodedURIHash.substring(decodedURIHash.length - 1));\r\n\r\n        return windowLocationTab || 0;\r\n    } catch (err) {\r\n        return 0;\r\n    }\r\n}\r\n\r\nfunction cssFriendlify(string) {\r\n    if (!string)\r\n        return string;\r\n\r\n    return string\r\n        .split(\"/\").join(\"\")\r\n        .split(\"#\").join(\"\")\r\n        .split(\":\").join(\"\")\r\n        .split(\".\").join(\"\");\r\n}\r\n\r\nexport default class JsonSchemaModalComponent extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        if (this.props.schema) {\r\n            // @ts-ignore\r\n            this.state = this.state || {};\r\n            this.state.schema = this.props.schema;\r\n\r\n            const schemaToJson = Object.assign({}, this.state.schema);\r\n            this.state.jsonSample = schemaToJson && schemaToJson.sample ? JSON.stringify(ViewUtils.sortObject(schemaToJson.sample), null, 2) : undefined;\r\n            delete schemaToJson.sample;\r\n\r\n            this.state.jsonSchema = JSON.stringify(ViewUtils.sortObject(schemaToJson), null, 2);\r\n        } else\r\n            this.state.schema = {};\r\n    }\r\n\r\n    // @ts-ignore\r\n    state = {\r\n        colorized: false,\r\n        modal: {},\r\n        currentTabIndex: getTabFromHash()\r\n    };\r\n\r\n    async setInitialOpenState() {\r\n        if (this.props.isError)\r\n            await this.goToTab(1);\r\n        else\r\n            await this.goToTab(getTabFromHash());\r\n    }\r\n\r\n    render() {\r\n        if (this.state.schema)\r\n            return (\r\n                <div\r\n                    style={{ cursor: \"default\" }}\r\n                    ref={(ref) => { this.state.modal = ref; }}\r\n                    className=\"modal bd-example-modal-lg\"\r\n                    role=\"dialog\"\r\n                    aria-labelledby=\"myLargeModalLabel\"\r\n                    aria-hidden=\"true\" >\r\n\r\n                    <div className=\"modal-dialog modal-lg\">\r\n\r\n                        <div className={`modal-content ${this.props.isError ? \"alert alert-danger\" : \"\"}`}>\r\n                            <span\r\n                                className=\"glyphicon glyphicon-remove close\"\r\n                                id=\"close-btn\"\r\n                                onClick={() => this.closeModal()}>\r\n                            </span>\r\n\r\n                            <h1 id=\"header\">{this.state.schema.id}</h1>\r\n                            <p>{this.props.isError ? \"Contains errors\" : this.state.schema.description}</p>\r\n\r\n                            <hr />\r\n\r\n                            {this.props.isError ?\r\n                                <ul className=\"nav nav-tabs\">\r\n                                    <li className=\"nav-item clickable\">\r\n                                        <a className={`nav-link ${this.state.currentTabIndex === 1 ? \"active\" : \"\"}`} onClick={() => this.goToTab(1)}>Error message</a>\r\n                                    </li>\r\n                                    <li className=\"nav-item clickable\">\r\n                                        <a className={`nav-link ${this.state.currentTabIndex === 2 ? \"active\" : \"\"}`} onClick={() => this.goToTab(2)}>Full error</a>\r\n                                    </li>\r\n                                </ul>\r\n                                :\r\n                                <ul className=\"nav nav-tabs\">\r\n                                    <li className=\"nav-item clickable\">\r\n                                        <a className={`nav-link ${this.state.currentTabIndex === 0 ? \"active\" : \"\"}`} onClick={() => this.goToTab(0)}>Definition</a>\r\n                                    </li>\r\n                                    <li className=\"nav-item clickable\">\r\n                                        <a className={`nav-link ${this.state.currentTabIndex === 1 ? \"active\" : \"\"}`} onClick={() => this.goToTab(1)}>Sample</a>\r\n                                    </li>\r\n                                    <li className=\"nav-item clickable\">\r\n                                        <a className={`nav-link ${this.state.currentTabIndex === 2 ? \"active\" : \"\"}`} onClick={() => this.goToTab(2)}>Json schema</a>\r\n                                    </li>\r\n                                </ul>\r\n                            }\r\n\r\n                            <div id={`docson-${cssFriendlify(this.props.endpointUrl)}-${this.state.schema.id}`}\r\n                                className=\"docson-entry\"\r\n                                hidden={this.state.currentTabIndex !== 0} >\r\n                                <br />\r\n                            </div>\r\n\r\n                            <span className=\"modal-container\"\r\n                                hidden={this.state.currentTabIndex !== 1}>\r\n                                {this.renderSample()}\r\n                            </span>\r\n\r\n                            <span className=\"modal-container\"\r\n                                hidden={this.state.currentTabIndex !== 2}>\r\n                                {this.renderJsonSchema()}\r\n                            </span>\r\n\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n\r\n        else return <span />\r\n    }\r\n\r\n    renderSample() {\r\n        if (!this.state.jsonSample)\r\n            return <span />;\r\n\r\n        return (\r\n            <span>\r\n\r\n                <button\r\n                    style={{\r\n                        display: \"inline\",\r\n                        marginTop: \"20px\"\r\n                    }}\r\n                    className=\"action btn-copy\"\r\n                    id=\"copy-sample\"\r\n                    onClick={e => this.copyJsonSampleToClipboard.copyToClipboard()}>\r\n\r\n                    <CopyToClipboardComponent\r\n                        ref={ref => this.copyJsonSampleToClipboard = ref}\r\n                        copyData={this.state.jsonSample} />\r\n\r\n                    Copy to clipboard <span className=\"glyphicon glyphicon-copy\"></span>\r\n\r\n                </button>\r\n\r\n                <div className=\"clearfix\" />\r\n\r\n                <pre\r\n                    ref={ref => { this.state.jsonSampleElem = ref; }}>\r\n                    {/* Since errors have some HTML formatted elements: */}\r\n                    <code\r\n                        id=\"sample-json\"\r\n                        dangerouslySetInnerHTML={{ __html: this.state.jsonSample }} />\r\n                </pre>\r\n\r\n            </span>\r\n        );\r\n    }\r\n\r\n    renderJsonSchema() {\r\n        if (!this.state.jsonSchema)\r\n            return <span />;\r\n\r\n        return (\r\n            <span>\r\n                <button\r\n                    style={{\r\n                        display: \"inline\",\r\n                        marginTop: \"20px\"\r\n                    }}\r\n                    className=\"action btn-copy\"\r\n                    id=\"copy-json-schema\"\r\n                    onClick={() => this.copyJsonSchemaToClipboard.copyToClipboard()}>\r\n\r\n                    <CopyToClipboardComponent\r\n                        ref={ref => this.copyJsonSchemaToClipboard = ref}\r\n                        copyData={this.state.jsonSchema} />\r\n\r\n                    Copy to clipboard <span className=\"glyphicon glyphicon-copy\"></span>\r\n\r\n                </button>\r\n\r\n                {this.state.jsonSchema.length > 0 ?\r\n                    <span>\r\n\r\n                        <div className=\"clearfix\" />\r\n\r\n                        <pre\r\n                            ref={ref => { this.state.jsonSchemaElem = ref; }}>\r\n                            {/* Since errors have some HTML formatted elements: */}\r\n                            <code\r\n                                id=\"json-schema-json\"\r\n                                dangerouslySetInnerHTML={{ __html: this.state.jsonSchema }} />\r\n                        </pre>\r\n\r\n                    </span> : \"No further details available.\"}\r\n\r\n            </span>\r\n        );\r\n    }\r\n\r\n    async openModal() {\r\n        try {\r\n            await this.setInitialOpenState();\r\n\r\n            history.replaceState(undefined, undefined, `#${this.props.endpointUrl}?modal=${this.state.schema.id}&tab=${this.state.currentTabIndex}`)\r\n\r\n            const schemaToJson = ViewUtils.sortObject(Object.assign({}, this.state.schema));\r\n            delete schemaToJson.sample;\r\n\r\n            /**\r\n             * Only works when frontend is loaded with bootstrap / jquery\r\n             */\r\n            if ($) {\r\n                // @ts-ignore\r\n                $(this.state.modal).modal();\r\n                $(this.state.modal).on(\"hide.bs.modal\", () => {\r\n                    this.resetModalHash();\r\n                });\r\n            }\r\n\r\n            if (!this.props.isError) {\r\n                const docson = nodeDocson();\r\n                docson.doc(schemaToJson, `docson-${cssFriendlify(this.props.endpointUrl)}-${this.state.schema.id}`);\r\n            }\r\n        } catch (err) {\r\n            console.warn(err);\r\n        }\r\n    }\r\n\r\n    closeModal() {\r\n        this.resetModalHash();\r\n\r\n        if ($)\r\n            // @ts-ignore\r\n            $(this.state.modal).modal(\"hide\");\r\n    }\r\n\r\n    resetModalHash() {\r\n        history.replaceState(undefined, undefined, `#${this.props.endpointUrl}`);\r\n    }\r\n\r\n    async goToTab(index) {\r\n        await this.setState({ currentTabIndex: index });\r\n\r\n        if (index === 2)\r\n            hljs.highlightBlock(this.state.jsonSchemaElem);\r\n\r\n        if (index === 1)\r\n            hljs.highlightBlock(this.state.jsonSampleElem);\r\n\r\n        window.location.hash = `${window.location.hash.substring(0, window.location.hash.length - 1)}${index}`;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/modal/JsonSchemaModalComponent.js","module.exports = require(\"highlight.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"highlight.js\"\n// module id = 14\n// module chunks = 0","import React from \"react\";\r\n\r\nexport default class CopyToClipboardComponent extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <input\r\n                type=\"text\"\r\n                className=\"curl-data\"\r\n                ref={ref => { this.input = ref; }}\r\n                onChange={() => { }}\r\n                value={this.props.copyData} hidden />\r\n        );\r\n    }\r\n\r\n    copyToClipboard() {\r\n        this.input.hidden = false;\r\n        this.input.select();\r\n        document.execCommand(\"copy\");\r\n        this.input.hidden = true;\r\n    }\r\n\r\n    shouldComponentUpdate() { return false; }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/copy-to-clipboard/CopyToClipboardComponent.js","import React from \"react\";\r\nimport CopyToClipboardComponent from \"../../copy-to-clipboard/CopyToClipboardComponent\";\r\n\r\nexport default class CopyAsCurlComponent extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <span hidden={!this.props.cUrl}>\r\n                <button\r\n                    className=\"action copy-as-curl btn-copy\"\r\n                    onClick={(e) => this.copyAsCurl()}>\r\n\r\n                    <CopyToClipboardComponent\r\n                        ref={ref => this.copyToClipboard = ref}\r\n                        copyData={this.props.cUrl} />\r\n\r\n                    Copy as cUrl <span className=\"glyphicon glyphicon-copy\"></span>\r\n                </button>\r\n\r\n                <div className=\"clearfix\" />\r\n            </span>\r\n        );\r\n    }\r\n\r\n    copyAsCurl() {\r\n        this.copyToClipboard.copyToClipboard();\r\n    }\r\n\r\n    shouldComponentUpdate() {\r\n        return false;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/endpoint-details/copy-as-curl/CopyAsCurlComponent.js","import React from \"react\";\r\nimport ViewUtils from \"../../../utils/ViewUtils\";\r\nimport { ApiDocContext } from \"../../Context\";\r\n\r\nexport default class EndpointsTableOfContentsComponent extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <ApiDocContext.Consumer>\r\n                {context => (\r\n\r\n                    <div className=\"col-md-6\">\r\n\r\n                        {this.props.type === \"Http\"\r\n                            ? this.httpEndpoints(context)\r\n                            : this.otherEndpoints(context)}\r\n\r\n                    </div>\r\n\r\n                )}\r\n            </ApiDocContext.Consumer>\r\n        );\r\n    }\r\n\r\n    shouldComponentUpdate() {\r\n        return false;\r\n    }\r\n\r\n    httpEndpoints(context) {\r\n        return (\r\n            <ul className=\"http\">\r\n\r\n                <a href=\"#http-endpoints\">\r\n                    <h3>Http endpoints</h3>\r\n                </a>\r\n\r\n                {\r\n                    Object.keys(context.endpointsByType.http).length === 0\r\n\r\n                        ? \"No endpoints\"\r\n\r\n                        : ViewUtils.sortedForEach(context.endpointsByType.http, (endpoints, serviceName, index) => {\r\n                            endpoints = endpoints.sort(this.sortEndpoints);\r\n\r\n                            if (endpoints.length === 0)\r\n                                return;\r\n\r\n                            return (\r\n                                <span\r\n                                    key={`endpointsByType.http-${serviceName}`}>\r\n                                    <a href={\"#\" + serviceName + \"-http\"}>\r\n                                        <h4>{serviceName}</h4>\r\n                                    </a>\r\n                                    {\r\n                                        endpoints.map((endpoint, index) => {\r\n                                            const parsedSubject = ViewUtils.parseSubjectToAPIUrl(endpoint.subject);\r\n\r\n                                            return (\r\n                                                <li\r\n                                                    key={`table-of-contents-http-${serviceName}-${endpoint.subject}`}\r\n                                                    title={endpoint.docs ? endpoint.docs.description : \"\"}\r\n                                                    className={endpoint.deprecated ? \"deprecated\" : \"\"}>\r\n                                                    <a href={\"#\" + parsedSubject.method + \"-to-\" + parsedSubject.url}>\r\n                                                        <span className={parsedSubject.method}>\r\n                                                            {parsedSubject.method}\r\n                                                        </span> to {parsedSubject.url}\r\n                                                    </a>\r\n                                                </li>\r\n                                            )\r\n                                        })\r\n                                    }\r\n\r\n                                </span>\r\n                            )\r\n                        })\r\n                }\r\n\r\n            </ul>\r\n        );\r\n    }\r\n\r\n    otherEndpoints(context) {\r\n        return (\r\n            <ul className={this.props.type.toLowerCase()}>\r\n                <a href={\"#\" + this.props.type.toLowerCase() + \"-endpoints\"}>\r\n                    <h3>{this.props.type} endpoints</h3>\r\n                </a>\r\n\r\n                {\r\n                    Object.keys(context.endpointsByType[this.props.type.toLowerCase()]).length === 0\r\n\r\n                        ? \"No endpoints\"\r\n\r\n                        : ViewUtils.sortedForEach(context.endpointsByType[this.props.type.toLowerCase()], (endpoints, serviceName, index) => {\r\n                            endpoints = endpoints.sort(this.sortEndpoints);\r\n\r\n                            if (endpoints.length === 0)\r\n                                return;\r\n\r\n                            return (\r\n                                <span\r\n                                    key={`${this.props.type.toLowerCase()}-${serviceName}`}>\r\n                                    <a href={\"#\" + serviceName + \"-\" + this.props.type.toLowerCase()}>\r\n                                        <h4>{serviceName}</h4>\r\n                                    </a>\r\n                                    {\r\n                                        endpoints.map((endpoint, index) => {\r\n                                            return (\r\n                                                <li key={`table-of-contents-${this.props.type}-${serviceName}-${endpoint.subject}`}\r\n                                                    title={endpoint.docs ? endpoint.docs.description : \"\"}\r\n                                                    className={endpoint.deprecated ? \"deprecated\" : \"\"}>\r\n                                                    <a\r\n                                                        href={\"#\" + endpoint.subject}\r\n                                                        dangerouslySetInnerHTML={{ __html: ViewUtils.getColorCodedTitle(endpoint.subject) }} />\r\n                                                </li>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </span>\r\n                            )\r\n                        })\r\n                }\r\n\r\n            </ul>\r\n        );\r\n    }\r\n\r\n    sortEndpoints(a, b) {\r\n        const aU = a.subject.toUpperCase();\r\n        const bU = b.subject.toUpperCase();\r\n\r\n        if (aU > bU) return 1;\r\n        else if (aU < bU) return -1;\r\n        else return 0;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/endpoints-table-of-contents/EndpointsTableOfContentsComponent.js","import React from \"react\";\r\nimport ViewUtils from \"../../../utils/ViewUtils\";\r\nimport JsonSchemaModalComponent from \"../modal/JsonSchemaModalComponent\";\r\n\r\nexport default class ErrorMessageComponent extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.preparedSchemasWithErrors = {};\r\n        this.prepareSchemasWithErrors();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <span>\r\n                <div className=\"alert alert-danger\"\r\n                    id=\"try-again-warning\"\r\n                    hidden={this.props.numberOfEndpoints !== 0}>\r\n\r\n                    <strong>Note:</strong> Something went wrong or there are no endpoints registered; <a id=\"refresh-page\" href=\"#\" onClick={() => this.refreshPage()}>\r\n                        please refresh the page.\r\n                    </a>\r\n\r\n                </div>\r\n\r\n                {this.getSchemasWithErrors()}\r\n            </span>\r\n        )\r\n    }\r\n\r\n    /**\r\n     * Prepares errors so that they can be shown inside a modal.\r\n     */\r\n    prepareSchemasWithErrors() {\r\n        if (this.props.schemasWithErrors)\r\n            Object.keys(this.props.schemasWithErrors).forEach(serviceName => {\r\n                const schemas = this.props.schemasWithErrors[serviceName];\r\n\r\n                schemas.forEach(schemaName => {\r\n                    if (!this.preparedSchemasWithErrors[`${serviceName}-${schemaName}`])\r\n                        this.preparedSchemasWithErrors[`${serviceName}-${schemaName}`] = {};\r\n\r\n                    if (this.props.schemasPerService[serviceName])\r\n                        this.preparedSchemasWithErrors[`${serviceName}-${schemaName}`].schema = this.props.schemasPerService[serviceName].find(schema => schema.id === schemaName);\r\n                });\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Displays all schemas with errors and makes it possible to open each in a modal.\r\n     */\r\n    getSchemasWithErrors() {\r\n        if (this.props.schemasWithErrors)\r\n            return (\r\n                <div\r\n                    className=\"alert alert-danger\"\r\n                    id=\"schemas-contains-errors\">\r\n                    <strong>Note:</strong> Error(s) were detected in the following json schemas:\r\n{\r\n                        ViewUtils.sortedForEach(this.props.schemasWithErrors, (schemas, serviceName) => {\r\n\r\n                            return ViewUtils.sortedForEach(schemas, (schemaWithError, index, i) => {\r\n\r\n                                return (\r\n                                    <li\r\n                                        key={i}\r\n                                        className={\"request-schema\" + \" \" + serviceName + \" \" + schemaWithError}>\r\n                                        <a href=\"\" onClick={(e) => { this.openSchemaWithError(e, serviceName, schemaWithError) }}>\r\n                                            {schemaWithError} <span className=\"glyphicon glyphicon-new-window\"></span>\r\n                                        </a> from {serviceName}\r\n\r\n                                        <JsonSchemaModalComponent\r\n                                            ref={ref => { this.preparedSchemasWithErrors[`${serviceName}-${schemaWithError}`].ref = ref; }}\r\n                                            subject={schemaWithError}\r\n                                            schema={this.preparedSchemasWithErrors[`${serviceName}-${schemaWithError}`].schema}\r\n                                            isError={true} />\r\n                                    </li>\r\n                                );\r\n                            })\r\n                        })\r\n                    }\r\n                </div>\r\n            );\r\n    }\r\n\r\n    /**\r\n     * Opens a specific error in a modal.\r\n     */\r\n    openSchemaWithError(e, serviceName, schemaWithError) {\r\n        e.preventDefault();\r\n        this.preparedSchemasWithErrors[`${serviceName}-${schemaWithError}`].ref.openModal();\r\n    }\r\n\r\n    /**\r\n     * Refreshes the page.\r\n     */\r\n    refreshPage() {\r\n        location.reload();\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/error-message/ErrorMessageComponent.js","import $ from \"jquery\";\r\nimport React from \"react\";\r\nimport ScrollToTopComponent from \"../scroll-to-top/ScrollToTopComponent\";\r\nimport { ApiDocContext } from \"../../Context\";\r\nimport { throws } from \"assert\";\r\n\r\nexport default class ToolbarComponent extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.allEndpointsOpen = false;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ApiDocContext.Consumer>\r\n                {context => (\r\n                    <div className=\"toolbar\">\r\n\r\n                        <div className=\"container\">\r\n\r\n                            {/* Buttons to the left */}\r\n                            <ScrollToTopComponent />\r\n\r\n                            {this.renderFiltering(context)}\r\n\r\n                            {/* Buttons to the right */}\r\n                            <div className=\"float-right\">\r\n                                <button\r\n                                    className=\"btn btn-danger btn-xs\"\r\n                                    onClick={() => this.resetCache()}>\r\n                                    Reset cache\r\n                            </button>\r\n                            </div>\r\n\r\n                        </div>\r\n\r\n                        <div className=\"clearfix\"></div>\r\n                    </div>\r\n                )}\r\n            </ApiDocContext.Consumer>\r\n        );\r\n    }\r\n\r\n    renderFiltering(context) {\r\n        return (\r\n            <div className=\"filter-container\">\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"filter\">Filter:</label>\r\n                    <input type=\"text\" className=\"form-control\" id=\"filter\"\r\n                        onChange={(e) => {\r\n                            e.persist();\r\n\r\n                            if (this.timeout)\r\n                                clearTimeout(this.timeout);\r\n\r\n                            this.timeout = setTimeout(() => context.filter(e), 300);\r\n                        }} />\r\n                </div>\r\n\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"filter-by\">Filter by:</label>\r\n                    <select\r\n                        value={context.filterBy}\r\n                        className=\"form-control\"\r\n                        id=\"filter-by\"\r\n                        onChange={(e) => context.changeFilterType(e)} >\r\n                        <option value=\"subject\">endpoint subject/url</option>\r\n                        <option value=\"permissions\">permissions</option>\r\n                        <option value=\"docs\">docs</option>\r\n                    </select>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    async resetCache() {\r\n        if (confirm(`Usecases for resetting cache:\r\n          - Old endpoints are still showing up.\r\n          - Too many errors are showing up (Typically after a redeploy of fruster-api-doc).\r\n          - No endpoints are showing up even after several normal refreshes.\r\n        \r\n        *This should not be used too much as it increases loading times severely, especially right after cache is reset*\r\n        \r\n        Are you sure you want to reset the cache?\r\n        `)) {\r\n            await $.post(\"/reset-cache\");\r\n            location.reload();\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate() {\r\n        return false;\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/toolbar/ToolbarComponent.js","module.exports = require(\"jquery\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 20\n// module chunks = 0","import React from \"react\";\r\n\r\nexport default class ScrollToTopComponent extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <button\r\n                onClick={e => this.scrollToTop()}\r\n                type=\"button\"\r\n                className=\"toc btn btn-xs btn-default scroll-top\">\r\n                <span className=\"glyphicon glyphicon-arrow-up\"></span> Scroll to top\r\n            </button>\r\n        );\r\n    }\r\n\r\n    scrollToTop() {\r\n        document.body.scrollTop = 0;\r\n        document.documentElement.scrollTop = 0;\r\n        location.hash = \"\";\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/scroll-to-top/ScrollToTopComponent.js","module.exports = require(\"assert\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"assert\"\n// module id = 22\n// module chunks = 0","export default ({ body, title, initialState }) => {\r\n    return `\r\n    <!DOCTYPE html>\r\n    <html>\r\n        <head>\r\n            <script>window._APP_STATE_ = ${initialState};</script>\r\n            <title>${title}</title>\r\n            <link rel=\"stylesheet\" href=\"/assets/index.css\" />\r\n            <link rel=\"stylesheet\" href=\"assets/googlecode.min.css\">\r\n            <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"/>\r\n        </head>\r\n\r\n        <body>\r\n            <div id=\"root\" title=\"Documentation was generated on ${new Date().toJSON()}\">${body}</div>\r\n        </body>\r\n\r\n        <script src=\"assets/jquery-3.1.0.js\" integrity=\"sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk=\" crossorigin=\"anonymous\"></script>\r\n        <script type=\"text/javascript\" src=\"assets/json-schema-faker.min.js\"></script>\r\n        <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\" integrity=\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\" crossorigin=\"anonymous\"></script>\r\n        <script type=\"text/javascript\" src=\"assets/node-docson.min.js\"></script> \r\n\r\n        <script src=\"assets/client.js\"></script>\r\n        <script src=\"assets/babel-polyfill.js\"/>\r\n        <browser-refresh enabled=\"true\" />\r\n\r\n    </html>\r\n`;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/template.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid\"\n// module id = 25\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 26\n// module chunks = 0","module.exports = require(\"util\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"util\"\n// module id = 27\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"fruster-bus\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fruster-bus\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"fruster-log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fruster-log\"\n// module id = 30\n// module chunks = 0","require(\"babel-polyfill\");\r\n\r\nconst constants = require(\"../constants\");\r\nconst uuid = require(\"uuid\");\r\nconst path = require(\"path\");\r\nconst log = require(\"fruster-log\");\r\n\r\nconst filePath = path.resolve(`${__dirname}/json-schemas`);\r\nconst JsonSchemaCruncher = require(\"../utils/JsonSchemaCruncher\");\r\n\r\nconst jsf = require(\"json-schema-faker\");\r\nconst request = require(\"request\");\r\n\r\njsf.option({\r\n    requiredOnly: false,\r\n    alwaysFakeOptionals: true,\r\n    failOnInvalidTypes: false,\r\n    useDefaultValue: true\r\n});\r\n\r\njsf.format(\"uuid\", () => uuid.v4());\r\n\r\nclass Utils {\r\n\r\n    /**\r\n    * derefs json schemas\r\n    * \r\n    * @param {Array<Object>} schemas schemas to save to folder\r\n    * \r\n    * @return {Promise<Object>}\r\n    */\r\n    static async derefJsonSchema(schemas, serviceName) {\r\n        const jsonSchemaCruncher = new JsonSchemaCruncher(filePath, serviceName);\r\n        await jsonSchemaCruncher.buildContext(schemas);\r\n\r\n        const schemaPromises = [];\r\n\r\n        schemas.forEach(schema => schemaPromises.push(\r\n            jsonSchemaCruncher.getSchema(schema.id)\r\n                .then(Utils._decirlularizeObject)\r\n                .then(prepareSchema)\r\n                .catch(err => {\r\n                    let errorString = err;\r\n\r\n                    try {\r\n                        errorString.message = fixErrorOutput(errorString.message);\r\n                        errorString.path = fixErrorOutput(errorString.path);\r\n                        errorString.stack = fixErrorOutput(errorString.stack);\r\n                    } catch (error) { }\r\n\r\n                    return {\r\n                        id: schema.id,\r\n                        description: errorString,\r\n                        _error: true, // _error so that it won't conflict with a valid schema\r\n                        sample: errorString.message\r\n                    };\r\n\r\n                    function fixErrorOutput(string) {\r\n                        return string.replace(/\\\\/g, \"/\").replace(/\\\"/g, \"'\").replace(/\\n/g, \"<br/>\");\r\n                    }\r\n                })));\r\n\r\n        /**\r\n         * @param {Object} schema \r\n         */\r\n        function prepareSchema(schema) {\r\n            try {\r\n                Utils._setFakerSpecificAttrs(schema);\r\n\r\n                if (!schema.sample) {\r\n                    try {\r\n                        schema.sample = jsf(schema);\r\n                    } catch (err) {\r\n                        schema.sample = \"Unable to generate sample, most likely due to circular json schema reference structure. See json schema instead\";\r\n                    }\r\n                }\r\n\r\n                return schema;\r\n            } catch (err) {\r\n                return schema;\r\n            }\r\n        }\r\n\r\n        return await Promise.all(schemaPromises)\r\n            .then(schemas => {\r\n                const errors = schemas.filter(result => result && result._error);\r\n                return { schemas, errors };\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Converts circular object to a non circular object, since JSON.stringify cannot do this.\r\n     * If this is not done at this step (but rather before sending the data to the client),\r\n     * once react is loaded on frontend, it will start to rerender the whole page \r\n     * (since then, the the data that was used to generate the page was different to the data sent with the page). \r\n     * \r\n     * @param {Object} schema \r\n     */\r\n    static _decirlularizeObject(schema) {\r\n        try {\r\n            /**\r\n             * If non circular, we can just return right away. \r\n             * If json parse succeeds, we know it is a non-circular object\r\n            */\r\n            JSON.parse(JSON.stringify(schema));\r\n            return schema;\r\n        } catch (err) { }\r\n\r\n        const output = {};\r\n        output._circular = true;\r\n\r\n        Object.keys(schema).map(key => {\r\n            const resp = decircularize(schema[key]);\r\n            output[key] = resp;\r\n        });\r\n\r\n        return output;\r\n\r\n        /**\r\n         * @param {Object} value \r\n         * @param {Number} depth \r\n         */\r\n        function decircularize(value, depth = 0) {\r\n            if (depth > constants.MAX_DEPTH_FOR_CIRCULAR_JSON_SCHEMAS)\r\n                throw \"MAX_DEPTH\"; /** just a dummy exception to go to the next try/catch */\r\n\r\n            if (value &&\r\n                typeof value === \"object\" &&\r\n                value !== null) {\r\n                try {\r\n                    return JSON.parse(JSON.stringify(value));\r\n                } catch (err) {\r\n                    try {\r\n                        const d = depth + 1;\r\n                        const result = {};\r\n\r\n                        Object.keys(value).map(key => {\r\n                            const resp = decircularize(value[key], d);\r\n                            result[key] = resp;\r\n                        });\r\n\r\n                        return result;\r\n                    } catch (err) {\r\n                        return [];\r\n                    }\r\n                }\r\n            } else\r\n                return value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Searches json objects and adds faker specifics.\r\n     * \r\n     * @param {Object} object \r\n     * \r\n     * @return {Void}\r\n     */\r\n    static _setFakerSpecificAttrs(object) {\r\n        try {\r\n            if (object) {\r\n                Object.keys(object).forEach(key => {\r\n                    if (object.hasOwnProperty(key)) {\r\n                        if (object && typeof object[key] === \"object\")\r\n                            Utils._setFakerSpecificAttrs(object[key]);\r\n\r\n                        switch (object[key]) {\r\n                            case \"uuid\":\r\n                                object[\"faker\"] = \"random.uuid\";\r\n                                break;\r\n                            case \"uri\":\r\n                                object[\"faker\"] = \"internet.url\";\r\n                                break;\r\n                        }\r\n\r\n                        switch (key) {\r\n                            case \"email\":\r\n                                object[key][\"faker\"] = \"internet.email\";\r\n                                break;\r\n                            case \"password\":\r\n                                object[key][\"faker\"] = \"internet.password\";\r\n                                break;\r\n\r\n                            case \"firstName\":\r\n                                object[key][\"faker\"] = \"name.firstName\";\r\n                                break;\r\n                            case \"middleName\":\r\n                                object[key][\"faker\"] = \"name.firstName\";\r\n                                break;\r\n                            case \"lastName\":\r\n                                object[key][\"faker\"] = \"name.lastName\";\r\n                                break;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        } catch (err) {\r\n            log.debug(\"setFakerSpecificAttrs\", err);\r\n        }\r\n    }\r\n\r\n    static httpRequest(method, url, body) {\r\n        return new Promise((resolve, reject) => {\r\n            const options = {\r\n                method,\r\n                url,\r\n                headers: { \"content-type\": \"application/json\" },\r\n                body,\r\n                json: true\r\n            };\r\n\r\n            request(options, function (error, resp, body) {\r\n                if (error) reject(error);\r\n                else resolve(body.data);\r\n            });\r\n\r\n        });\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = Utils;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js","module.exports = {\r\n\r\n    /** \r\n     * The maximum depth to include when generating samples for circular json schemas.\r\n     * 1 depth = 1 instance of a circular object.\r\n     */\r\n    MAX_DEPTH_FOR_CIRCULAR_JSON_SCHEMAS: 5\r\n\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","const $RefParser = require(\"json-schema-ref-parser\");\r\nconst fs = require(\"fs-extra\");\r\nconst path = require(\"path\");\r\nconst log = require(\"fruster-log\");\r\n\r\nclass JsonSchemaCruncher {\r\n\r\n\tconstructor(tempDir, serviceName) {\r\n\t\tthis.serviceName = serviceName;\r\n\t\tthis.schemasDir = path.join(tempDir, serviceName);\r\n\t}\r\n\r\n\tasync getSchema(schemaId) {\r\n\t\tlog.silly(\"derefing\", schemaId);\r\n\t\tconst schemaPath = path.join(this.schemasDir, schemaId);\r\n\r\n\t\t// @ts-ignore\r\n\t\treturn await $RefParser.dereference(schemaPath, {\r\n\t\t\tdereference: { circular: true }\r\n\t\t});\r\n\t}\r\n\r\n\tasync buildContext(bundle) {\r\n\t\tawait this._writeJsonSchemas(bundle);\r\n\t}\r\n\r\n\tasync _writeJsonSchemas(bundle) {\r\n\t\tawait fs.ensureDir(this.schemasDir);\r\n\r\n\t\tawait bundle.map(async (jsonSchema) => {\r\n\t\t\tif (this.schemasDir && jsonSchema.id) {\r\n\t\t\t\tconst filePath = path.join(this.schemasDir, jsonSchema.id);\r\n\r\n\t\t\t\tlog.silly(filePath);\r\n\t\t\t\treturn fs.writeJson(filePath, jsonSchema);\r\n\t\t\t} else {\r\n\t\t\t\tlog.error(\"Error while writing json; this.schemasDir:\", this.schemasDir, \", jsonSchema.id:\", jsonSchema.id);\r\n\t\t\t}\r\n\t\t}).filter(p => !!p);\r\n\t}\r\n\r\n}\r\n\r\nmodule.exports = JsonSchemaCruncher;\n\n\n// WEBPACK FOOTER //\n// ./src/utils/JsonSchemaCruncher.js","module.exports = require(\"json-schema-ref-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"json-schema-ref-parser\"\n// module id = 34\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 35\n// module chunks = 0","module.exports = require(\"json-schema-faker\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"json-schema-faker\"\n// module id = 36\n// module chunks = 0","module.exports = require(\"request\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request\"\n// module id = 37\n// module chunks = 0","const ViewUtils = require(\"../ViewUtils\");\r\nconst _ = require(\"lodash\");\r\n\r\n/**\r\n * \r\n * TODO: \r\n * special type cases like \r\n *  \"userId\": {\r\n *    \"anyOf\": [\r\n *      {\r\n *        \"description\": \"The id of the user associated to the log\",\r\n *        \"type\": \"string\"\r\n *      },\r\n *      {\r\n *        \"description\": \"Ids of the users associated to the log\",\r\n *        \"items\": {\r\n *          \"type\": \"string\"\r\n *        },\r\n *        \"type\": \"array\"\r\n *      }\r\n *    ]\r\n * }\r\n*\r\n*TODO: Make it impossible for two functions to get the same name (This will not happen very often)\r\n*/\r\n\r\n/**\r\n * NOTE: all tabs and spaces in the strings are there because they should be there 😁\r\n */\r\nclass ServiceClientGenerator {\r\n\r\n    /**\r\n     * @typedef {Object} EndpointConstant \r\n     * \r\n     * @property {String} constantName\r\n     * @property {String} subject\r\n     * @property {String} functionVariableName\r\n     */\r\n\r\n    /**\r\n     * @param {Object} options \r\n     * @param {String} options.serviceName\r\n     * @param {Array<Object>} options.endpoints\r\n     * @param {Array<String>} options.subjects\r\n     */\r\n    constructor(options) {\r\n        this.customTypeDefs = {};\r\n\r\n        /** @type {Array<Endpoint>} */\r\n        this.endpoints = [];\r\n\r\n        /** @type {Array<EndpointConstant>} */\r\n        this.endpointConstants = [];\r\n\r\n        this.serviceName = options.serviceName;\r\n        this.className = ViewUtils.replaceAll(Utils.toTitleCase(this.serviceName), \" \", \"\") + \"Client\";\r\n\r\n        options.endpoints.forEach(endpoint => {\r\n            if (options.subjects && options.subjects.length !== 0 && !options.subjects.includes(endpoint.subject))\r\n                return;\r\n\r\n            const constant = this._getEndpointConstant(endpoint);\r\n            const requestSchema = endpoint.schemas.find(schema => schema.id === endpoint.requestSchema);\r\n            const responseSchema = endpoint.schemas.find(schema => schema.id === endpoint.responseSchema);\r\n            const endpointParameters = this._getEndpointParameters(requestSchema);\r\n            const returnType = this._getEndpointTypeDef(responseSchema);\r\n            const constantNameCombined = `${this.className}.endpoints.${constant.constantName}`;\r\n            const description = endpoint.docs ? endpoint.docs.description : \"\";\r\n            const constantsWithSameName = this.endpointConstants.filter(c => c.constantName === constant.constantName);\r\n\r\n            if (constantsWithSameName.length > 0)\r\n                constant.constantName = constant.constantName + \"_\" + constantsWithSameName.length;\r\n\r\n            this.endpointConstants.push(constant);\r\n\r\n            this.endpoints.push(new Endpoint(constantNameCombined, constant.functionVariableName, endpointParameters, description, returnType, endpoint.deprecated));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        const typDefs = Object.keys(this.customTypeDefs).map(key => this.customTypeDefs[key].toJavascriptClass());\r\n        const endpoints = this.endpoints.map(endpoint => endpoint.toJavascriptClass());\r\n        const classString = `const bus = require(\"fruster-bus\");\r\n\r\n/**\r\n * Note: this service client was generated automatically by api doc @ ${new Date().toJSON()}\r\n */\r\nclass ${this.className}{\r\n\r\n    /**\r\n     * All endpoints\r\n     */\r\n    static get endpoints(){\r\n\r\n        return {\r\n\r\n${this.endpointConstants.map(endpointConstant => `            ${endpointConstant.constantName}: \"${endpointConstant.subject}\"`).join(\",\\n\")}\r\n\r\n        };\r\n\r\n    }\r\n\r\n${typDefs.join(\"\\n\")}\r\n${endpoints.join(\"\\n\")}\r\n}\r\n\r\nmodule.exports = ${this.className};`;\r\n\r\n        return this._formatJavascript(classString);\r\n    }\r\n\r\n    /**\r\n     * Fixes faulty formatting\r\n     * \r\n     * @param {String} string \r\n     * @return {String}\r\n     */\r\n    _formatJavascript(string) {\r\n        // string = string.split(\"\\n\\n\").join(\"\\n\"); // Removes double line breaks\r\n        string = string.split(\"    /**\\n\\n\").join(\"    /**\\n\"); // removes new empty lines within comment blocks\r\n        string = string.split(\"    /**\\n     *\\n\").join(\"    /**\\n\"); // removes double new lines in comments\r\n        string = string.split(\"{\\n        \\n        return \").join(\"{\\n        return \"); // removes new lines before return statement in functions\r\n\r\n        if (string.includes(\"log.warn\") || string.includes(\"log.error\") || string.includes(\"log.debug\")) // adds fruster-log require if fruster-log is used anywhere\r\n            string = \"const log = require(\\\"fruster-log\\\");\\n\" + string;\r\n\r\n        return string;\r\n    }\r\n\r\n    /**\r\n     * Gets response typeDef from a schema\r\n     * \r\n     * @param {Object} schema response schema\r\n     * \r\n     * @return {String|TypeDefArrayProperty|TypeDefProperty}\r\n     */\r\n    _getEndpointTypeDef(schema) {\r\n        if (!schema)\r\n            return null;\r\n\r\n        if (this.customTypeDefs[schema.id])\r\n            return this.customTypeDefs[schema.id];\r\n\r\n        const name = schema.id;\r\n        const params = this._getEndpointParameters(schema);\r\n        const typeDefs = params.map(param => {\r\n            if (param instanceof ArrayParameter)\r\n                return new TypeDefArrayProperty(param);\r\n            else if (param instanceof Parameter)\r\n                return new TypeDefProperty(param);\r\n        });\r\n\r\n        let type = \"\";\r\n        let description = \"\";\r\n\r\n        if (!schema.type || schema.type === \"\")\r\n            type = \"Object\";\r\n        else if (schema.type === \"array\") {\r\n            if (schema.items && schema.items.type)\r\n                type = schema.items.type;\r\n            else\r\n                type = \"Object\";\r\n\r\n            description = schema.items ? schema.items.description : \"\";\r\n        } else {\r\n            type = schema.type;\r\n            description = schema.description;\r\n        }\r\n\r\n        const typeDef = new TypeDef(name, type, description, typeDefs);\r\n\r\n        let output = \"\";\r\n\r\n        if (typeDefs.length > 0) {\r\n            this.customTypeDefs[schema.id] = typeDef;\r\n            output = name;\r\n        } else\r\n            output = typeDef.type;\r\n\r\n        return output;\r\n    }\r\n\r\n    /**\r\n     * Gets endpoint paramters from a schema\r\n     * \r\n     * @param {Object} schema \r\n     * \r\n     * @return {Array<Parameter>}\r\n     */\r\n    _getEndpointParameters(schema) {\r\n        if (!schema || !schema.id)\r\n            return [];\r\n\r\n        const parameters = [];\r\n        const properties = schema.properties ? schema.properties : schema.items ? schema.items.properties : {};\r\n\r\n        if (!properties)\r\n            return [];\r\n\r\n        const propertyKeys = Object.keys(properties);\r\n\r\n        for (let i = 0; i < propertyKeys.length; i++) {\r\n            const property = properties[propertyKeys[i]];\r\n\r\n            if (!property)\r\n                continue;\r\n\r\n            let parameter;\r\n\r\n            if (property.type === \"array\") {\r\n                const subParams = this._getEndpointParameters(property);\r\n\r\n                if (subParams.length === 0 && property.items && \"type\" in property.items)\r\n                    subParams.push(new Parameter(\r\n                        propertyKeys[i],\r\n                        property.items.type,\r\n                        property.items.description,\r\n                        false));\r\n\r\n                const propertySchema = { ...property, id: `${schema.id}${Utils.toTitleCase(propertyKeys[i])}` }\r\n                const type = this._getEndpointTypeDef(propertySchema);\r\n\r\n                parameter = new ArrayParameter(\r\n                    propertyKeys[i],\r\n                    type.name ? type.name : type,\r\n                    property.description,\r\n                    subParams,\r\n                    schema.required ? schema.required.includes(propertyKeys[i]) : true);\r\n            } else {\r\n                parameter = new Parameter(\r\n                    propertyKeys[i],\r\n                    property.type,\r\n                    property.description,\r\n                    schema.required ? schema.required.includes(propertyKeys[i]) : false);\r\n            }\r\n\r\n            if (property.type === \"object\") {\r\n                const subParams = this._getEndpointParameters(property);\r\n\r\n                if (!parameter.required && subParams.length > 0) {\r\n                    const propertySchema = { ...property, id: `${schema.id}${Utils.toTitleCase(parameter.name)}` }\r\n                    const type = this._getEndpointTypeDef(propertySchema);\r\n\r\n                    parameter = new Parameter(\r\n                        propertyKeys[i],\r\n                        type,\r\n                        property.description,\r\n                        schema.required ? schema.required.includes(propertyKeys[i]) : false);\r\n                } else {\r\n                    subParams.forEach(param => {\r\n                        param.name = `${propertyKeys[i]}.${param.name}`;\r\n                        parameters.push(param);\r\n                    });\r\n                }\r\n            }\r\n\r\n            parameters.push(parameter);\r\n        }\r\n\r\n        return parameters;\r\n    }\r\n\r\n    /**\r\n     * Gets constant name and subject for an endpoint\r\n     * \r\n     * @param {Object} endpoint \r\n     * @param {String} endpoint.subject\r\n     * \r\n     * @return {EndpointConstant}\r\n     */\r\n    _getEndpointConstant(endpoint) {\r\n        const constantsServiceName = ViewUtils.replaceAll(this.serviceName, \"-\", \"_\").toUpperCase();\r\n\r\n        let constantName = ViewUtils.replaceAll(endpoint.subject.toUpperCase(), \"-\", \"_\");\r\n        constantName = ViewUtils.replaceAll(constantName, \".\", \"_\");\r\n        constantName = constantName.replace(`${constantsServiceName}_`, \"\");\r\n        constantName = ViewUtils.replaceAll(constantName, \":\", \"\");\r\n        constantName = ViewUtils.replaceAll(constantName, \"*\", \"\");\r\n\r\n        let functionVariableName = _.camelCase(endpoint.subject).replace(_.camelCase(this.serviceName), \"\");\r\n\r\n        if (functionVariableName[0])\r\n            functionVariableName = functionVariableName[0].toLowerCase() + functionVariableName.substring(1);\r\n        else\r\n            functionVariableName = endpoint.subject;\r\n\r\n        return {\r\n            constantName,\r\n            subject: endpoint.subject,\r\n            functionVariableName\r\n        };\r\n    }\r\n\r\n}\r\n\r\nmodule.exports = ServiceClientGenerator;\r\n\r\nclass TypeDef {\r\n\r\n    /**\r\n     * @param {String} name \r\n     * @param {String} type \r\n     * @param {String} description \r\n     * @param {Array<TypeDefProperty>} properties \r\n     */\r\n    constructor(name, type, description, properties) {\r\n        this.name = Utils.toTitleCase(name);\r\n        this.type = type;\r\n        this.description = description;\r\n        this.properties = properties;\r\n        this._type = \"_TypeDef\";\r\n    }\r\n\r\n    /**s\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        const typeDefProperties = this.properties.map(typeDefProperty => typeDefProperty.toJavascriptClass());\r\n\r\n        return `    /**\r\n     * @typedef {${Utils.toTitleCase(this.type)}} ${this.name} ${this.description || \"\"} \r\n     *\r\n${typeDefProperties.length > 0 ? typeDefProperties.join(\"\\n\") : \"\"}\r\n     */\r\n`;\r\n    }\r\n\r\n}\r\n\r\nclass TypeDefProperty {\r\n\r\n    /**\r\n     * @param {Object} parameter \r\n     * @param {String} parameter.name \r\n     * @param {String} parameter.type \r\n     * @param {String} parameter.description \r\n     * @param {Boolean=} parameter.required \r\n     */\r\n    constructor(parameter) {\r\n        this.name = parameter.name;\r\n        this.type = parameter.type;\r\n        this.description = parameter.description;\r\n        this.required = !!parameter.required || parameter.type && parameter.type.toLowerCase && parameter.type.toLowerCase().includes(\"null\");\r\n        this._type = \"_TypeDefProperty\";\r\n    }\r\n\r\n    /**\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        let typeString = \"\";\r\n\r\n        if (Array.isArray(this.type)) {\r\n            typeString = this.type\r\n                .filter(type => type !== \"null\")\r\n                .map(type => Utils.toTitleCase(type)).join(\"|\");\r\n        } else if (!this.type || this.type === \"\")\r\n            typeString = \"Object\";\r\n        else\r\n            typeString = Utils.toTitleCase(this.type);\r\n\r\n        if ([\"Integer\", \"Float\"].includes(typeString))\r\n            typeString = \"Number\";\r\n\r\n        return `     * @property {${typeString}${!this.required ? \"=\" : \"\"}} ${this.name} ${this.description || \"\"}`;\r\n    }\r\n\r\n}\r\n\r\nclass TypeDefArrayProperty extends TypeDefProperty {\r\n\r\n    /**\r\n     * @param {Object} parameter \r\n     * @param {String} parameter.name \r\n     * @param {String} parameter.type \r\n     * @param {String} parameter.description \r\n     * @param {Boolean=} parameter.required \r\n     */\r\n    constructor(parameter) {\r\n        super(parameter);\r\n\r\n        if (parameter instanceof ArrayParameter)\r\n            this.params = parameter.params;\r\n\r\n        this._type = \"_TypeDefArrayProperty\";\r\n    }\r\n\r\n    /**\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        let typeString = \"\";\r\n\r\n        if (Array.isArray(this.type)) {\r\n            typeString = this.type\r\n                .filter(type => type !== \"null\")\r\n                .map(type => Utils.toTitleCase(type)).join(\"|\");\r\n        } else\r\n            typeString = Utils.toTitleCase(this.type);\r\n\r\n        let description = this.description;\r\n\r\n        if (description === \"\")\r\n            description = this.params[0].description;\r\n\r\n        if ([\"Integer\", \"Float\"].includes(typeString))\r\n            typeString = \"Number\";\r\n\r\n        return `     * @property {Array<${typeString}>${!this.required ? \"=\" : \"\"}} ${this.name} ${description || \"\"}`;\r\n    }\r\n}\r\n\r\nclass Endpoint {\r\n\r\n    /**\r\n     * @param {String} urlConstant\r\n     * @param {String} endpointName\r\n     * @param {Array<Parameter>} params\r\n     * @param {String} description\r\n     * @param {String|Object|TypeDefProperty} returnType\r\n     * @param {String} deprecatedReason\r\n     */\r\n    constructor(urlConstant, endpointName, params, description, returnType, deprecatedReason) {\r\n        this.endpointName = endpointName;\r\n        this.urlConstant = urlConstant;\r\n        this.description = description;\r\n        this.returnType = returnType;\r\n        this.deprecatedReason = deprecatedReason;\r\n\r\n        this.params = Utils.sortParams(params);\r\n        this.params = [new Parameter(\"reqId\", \"string\", \"the request id\", true)].concat(this.params);\r\n\r\n        this._type = \"_Endpoint\";\r\n    }\r\n\r\n    /**\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        const functionParams = `${getParamsList(this.params)}`;\r\n        const requestBodyParams = `${getParamsList(this.params.slice(1), true)}`;\r\n        const returnType = `Promise<${Utils.toTitleCase(this.returnType ? this.returnType.name ? this.returnType.name : this.returnType : \"Void\")}>`;\r\n        const deprecatedReasonString = this.deprecatedReason ? `     * @deprecated ${this.deprecatedReason}` : \"\";\r\n\r\n        return `    /**\r\n${deprecatedReasonString}\r\n     *\r\n     * ${this.description || \"\"}\r\n     * \r\n${this.params.map(param => param.toJavascriptClass()).join(\"\\n\")}\r\n     *\r\n     * @return {${returnType}}\r\n     */\r\n    static async ${this.endpointName}(${functionParams}){\r\n        ${this.deprecatedReason ? `log.warn(\"Using deprecated endpoint ${this.endpointName}\")` : \"\"}\r\n        return (await bus.request({\r\n            subject: ${this.urlConstant},\r\n            message: {\r\n                reqId${requestBodyParams.length > 0 ? `,\r\n                data: {\r\n                    ${requestBodyParams}\r\n                }` : \"\"}\r\n            }\r\n        })).data;\r\n    }\r\n    `;\r\n\r\n        function getParamsList(params, isRequestBody) {\r\n            return params.filter(param => !param.name.includes(\".\")).map((param, i) => `${i > 0 ? \" \" : \"\"}${Utils.replaceReservedKeyword(param.name, isRequestBody)}`);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nclass Parameter {\r\n\r\n    /**\r\n     * @param {String} name \r\n     * @param {String} type \r\n     * @param {String} description \r\n     * @param {Boolean=} required \r\n     */\r\n    constructor(name, type, description, required) {\r\n        this.name = name;\r\n        this.type = type || \"any\";\r\n        this.description = description;\r\n        this.required = !!required || type && type.toLowerCase && type.toLowerCase().includes(\"null\");\r\n        this._type = \"_Paramter\";\r\n    }\r\n\r\n    /**\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        let typeString = \"\";\r\n\r\n        if (Array.isArray(this.type)) {\r\n            typeString = this.type\r\n                .filter(type => type !== \"null\")\r\n                .map(type => Utils.toTitleCase(type)).join(\"|\");\r\n        } else\r\n            typeString = Utils.toTitleCase(this.type);\r\n\r\n        if ([\"Integer\", \"Float\"].includes(typeString))\r\n            typeString = \"Number\";\r\n\r\n        if (typeString === \"Any\")\r\n            typeString = \"any\";\r\n\r\n        return `     * @param {${typeString}${!this.required ? \"=\" : \"\"}} ${Utils.replaceReservedKeyword(this.name)} ${this.description || \"\"}`;\r\n    }\r\n\r\n}\r\n\r\nclass ArrayParameter extends Parameter {\r\n\r\n    /**\r\n     * @param {String} name \r\n     * @param {String} type \r\n     * @param {String} description \r\n     * @param {Array<Parameter>} params \r\n     * @param {Boolean=} required \r\n     */\r\n    constructor(name, type, description, params, required) {\r\n        super(name, type, description, required);\r\n        this.params = params;\r\n        this.required = !params.filter(p => !p.required);\r\n        this._type = \"_ArrayParamter\";\r\n    }\r\n\r\n    /**\r\n     * Converts all data to a javascript service client class\r\n     */\r\n    toJavascriptClass() {\r\n        let typeString = Utils.toTitleCase(this.type);\r\n\r\n        if ([\"Integer\", \"Float\"].includes(typeString))\r\n            typeString = \"Number\";\r\n\r\n        return `     * @param {Array<${typeString}>${!this.required ? \"=\" : \"\"}} ${this.name} ${this.description || \"\"}`;\r\n    }\r\n\r\n}\r\n\r\nclass Utils {\r\n\r\n    static toTitleCase(string) {\r\n        return _.startCase(string).split(\" \").join(\"\");\r\n    }\r\n\r\n    /**\r\n     * @param {Array<Parameter>} params \r\n     * @return {Array<Parameter>} \r\n     */\r\n    static sortParams(params) {\r\n        return params.sort((a, b) => {\r\n            const aVal = a.required ? 1 : 0;\r\n            const bVal = b.required ? 1 : 0;\r\n\r\n            return bVal - aVal;\r\n        });\r\n    }\r\n\r\n    static get RESERVED_JAVASCRIPT_KEYWORDS() { return [\"abstract\", \"arguments\", \"await\", \"boolean\", \"break\", \"byte\", \"case\", \"catch\", \"char\", \"class\", \"const\", \"continue\", \"debugger\", \"default\", \"delete\", \"do\", \"double\", \"else\", \"enum\", \"eval\", \"export\", \"extends\", \"false\", \"final\", \"finally\", \"float\", \"for\", \"function\", \"goto\", \"if\", \"implements\", \"import\", \"in\", \"instanceof\", \"int\", \"interface\", \"let*\", \"long\", \"native\", \"new\", \"null\", \"package\", \"private\", \"protected\", \"public\", \"return\", \"short\", \"static\", \"super*\", \"switch\", \"synchronized\", \"this\", \"throw\", \"throws\", \"transient\", \"true\", \"try\", \"typeof\", \"var\", \"void\", \"volatile\", \"while\", \"with\", \"yield\"]; };\r\n\r\n    /**\r\n     * Replaces reserved keywords with adjusted name to not collide with them.\r\n     * \r\n     * @param {String} string \r\n     * @param {Boolean} isRequestBody \r\n     */\r\n    static replaceReservedKeyword(string, isRequestBody) {\r\n        if (Utils.RESERVED_JAVASCRIPT_KEYWORDS.includes(string)) {\r\n            if (isRequestBody)\r\n                return `\"${string}\": ${string}Param`;\r\n            else\r\n                return `${string}Param`;\r\n        } else\r\n            return string;\r\n    };\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/service-client-generator/ServiceClientGenerator.js","module.exports = require(\"lodash\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash\"\n// module id = 39\n// module chunks = 0","module.exports = require(\"fruster-health\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fruster-health\"\n// module id = 40\n// module chunks = 0"],"sourceRoot":""}